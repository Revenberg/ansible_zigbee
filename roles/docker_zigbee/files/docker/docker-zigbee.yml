version: '3'
services:
  nodered:
    image: nodered/node-red-docker:slim
    ports:
     - "1880:1880"
    volumes:
     - ./data/nodered:/data      
    depends_on:
     - mqtt
    restart: always
  mqtt:
   image: "eclipse-mosquitto:latest"
   ports:
    - "1883:1883"
    - "9001:9001"
   volumes:
    - ./data/mqtt/config:/mosquitto/config
    - ./data/mqtt/data:/mosquitto/data
    - ./data/mqtt/log:/mosquitto/log
   restart: always   
  zigbee:
   image: koenkk/zigbee2mqtt    
   volumes:
    - ./data/zigbee:/app/data
   depends_on:
     - mqtt     
   devices:
    - "/dev/ttyACM0:/dev/ttyACM0"
   restart: always   
