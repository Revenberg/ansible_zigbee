[
    {
        "id": "d9d0239.9656ae",
        "type": "tab",
        "label": "Zigbee",
        "disabled": false,
        "info": ""
    },
    {
        "id": "b373cb64.b32288",
        "type": "tab",
        "label": "Deuren",
        "disabled": false,
        "info": ""
    },
    {
        "id": "9aeafd2a.62224",
        "type": "tab",
        "label": "Netwerk",
        "disabled": true,
        "info": ""
    },
    {
        "id": "5f633a28.607134",
        "type": "tab",
        "label": "OWM Landscape",
        "disabled": false,
        "info": ""
    },
    {
        "id": "d1076ec5.efc15",
        "type": "tab",
        "label": "Menu",
        "disabled": false,
        "info": ""
    },
    {
        "id": "9a1a2b9e.d6da98",
        "type": "tab",
        "label": "Schuur",
        "disabled": false,
        "info": ""
    },
    {
        "id": "1112a3ea.54efdc",
        "type": "tab",
        "label": "Z2M Admin",
        "disabled": false,
        "info": ""
    },
    {
        "id": "54720da2.31fe84",
        "type": "zigbee2mqtt-server",
        "name": "Zigbee",
        "host": "127.0.0.1",
        "mqtt_port": "1883",
        "mqtt_username": "",
        "mqtt_password": "",
        "tls": "",
        "usetls": false,
        "base_topic": "zigbee2mqtt"
    },
    {
        "id": "ac5435ab.ce7598",
        "type": "ui_tab",
        "name": "Deuren",
        "icon": "dashboard",
        "order": 7,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "fb0248e0.17bda8",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "Schuur",
            "hideToolbar": "true",
            "allowSwipe": "true",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "4ec1ae6.5ee7c5",
        "type": "mqtt-broker",
        "name": "",
        "broker": "127.0.0.1",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": false,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "606c92e8.3b8f6c",
        "type": "ui_tab",
        "name": "Thuis",
        "icon": "dashboard",
        "order": 9,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "5b148da4.232e64",
        "type": "ui_group",
        "name": "Thuis",
        "tab": "606c92e8.3b8f6c",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "11953a91.2f6945",
        "type": "slack-config",
        "name": "slack-token"
    },
    {
        "id": "e0dd3b52.9b32b8",
        "type": "light-scheduler-settings",
        "name": "Thuis",
        "latitude": "53.179807",
        "longitude": "6.168264"
    },
    {
        "id": "e480e105.3a76c",
        "type": "ui_group",
        "name": "Default",
        "tab": "ac5435ab.ce7598",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "448bdcc5.b9a614",
        "type": "mqtt-broker",
        "name": "mqtt",
        "broker": "127.0.0.1",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": ""
    },
    {
        "id": "82e7296c.259148",
        "type": "ui_tab",
        "name": "Z2M Admin",
        "icon": "dashboard",
        "order": 10,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "1ad0e792.0de138",
        "type": "ui_tab",
        "name": "Z2M Admin",
        "icon": "dashboard",
        "order": 11,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "96cc68ec.7a50e8",
        "type": "ui_group",
        "name": "Netwerk",
        "tab": "ac5435ab.ce7598",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "6e7b87e7.e98e08",
        "type": "ui_group",
        "name": "Device management",
        "tab": "3b4b038f.7302fc",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "9a24bdf1.47e28",
        "type": "ui_group",
        "name": "Device list",
        "tab": "3b4b038f.7302fc",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "3025ab4d.2e8454",
        "type": "ui_group",
        "name": "Bridge configuration",
        "tab": "3b4b038f.7302fc",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "94df4c7e.27404",
        "type": "ui_group",
        "name": "Network map",
        "tab": "",
        "order": 1,
        "disp": false,
        "width": "27",
        "collapse": false
    },
    {
        "id": "80f9dc48.85d86",
        "type": "ui_group",
        "name": "Device details",
        "tab": "3b4b038f.7302fc",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "7ce586d2.095418",
        "type": "ui_group",
        "name": "Group configuration",
        "tab": "3b4b038f.7302fc",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "3b4b038f.7302fc",
        "type": "ui_tab",
        "name": "Z2M Admin",
        "icon": "dashboard",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "98a0c192.bc4bf",
        "type": "slackbot-controller",
        "name": "nodered",
        "bot_token": "xoxb-319704114455-1614678738321-lCxkGojesFLdDp1IMDPxy6hm"
    },
    {
        "id": "4492a511.4d15cc",
        "type": "ui_tab",
        "name": "Schuur",
        "icon": "dashboard",
        "order": 12,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "fd8a5c66.51244",
        "type": "ui_group",
        "name": "Group 1",
        "tab": "4492a511.4d15cc",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "476cb6e8.7ef1b8",
        "type": "ui_group",
        "name": "Group 2",
        "tab": "4492a511.4d15cc",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "615f2632.e1a968",
        "type": "ui_group",
        "name": "Groep 3",
        "tab": "4492a511.4d15cc",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "8ae5d911.8092a8",
        "type": "ui_group",
        "name": "Groep 4",
        "tab": "4492a511.4d15cc",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "782cc8a3.de1238",
        "type": "ui_group",
        "name": "Groep 5",
        "tab": "4492a511.4d15cc",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "e66edfe2.ea332",
        "type": "ui_group",
        "name": "Schuur",
        "tab": "465038ed.e7bb88",
        "order": 1,
        "disp": true,
        "width": "13",
        "collapse": false
    },
    {
        "id": "465038ed.e7bb88",
        "type": "ui_tab",
        "name": "Schuur",
        "icon": "home",
        "order": 6
    },
    {
        "id": "99a4dc86.46d248",
        "type": "ui_group",
        "name": "Masterswitches",
        "tab": "258c6649.0213da",
        "order": 6,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "b12941f.1cd05c",
        "type": "ui_group",
        "name": "Condition",
        "tab": "eb94216d.968598",
        "order": 5,
        "disp": false,
        "width": "4",
        "collapse": false
    },
    {
        "id": "8da50f69.44fe38",
        "type": "ui_group",
        "name": "Wind",
        "tab": "eb94216d.968598",
        "order": 4,
        "disp": false,
        "width": "4",
        "collapse": false
    },
    {
        "id": "5a4d76d2.5ae128",
        "type": "ui_group",
        "name": "Luftfeuchtigkeit",
        "tab": "258c6649.0213da",
        "order": 4,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "14584712.7a2929",
        "type": "ui_group",
        "name": "Condition",
        "tab": "eb94216d.968598",
        "order": 2,
        "disp": false,
        "width": "2",
        "collapse": false
    },
    {
        "id": "5e0d6747.b726b",
        "type": "ui_group",
        "name": "Forecast",
        "tab": "eb94216d.968598",
        "order": 6,
        "disp": false,
        "width": "8",
        "collapse": false
    },
    {
        "id": "258c6649.0213da",
        "type": "ui_tab",
        "name": "Home",
        "icon": "home",
        "order": 13
    },
    {
        "id": "eb94216d.968598",
        "type": "ui_tab",
        "name": "Wetterstation",
        "icon": "fa-thermometer-half",
        "order": 15,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "70fb931.dfc146c",
        "type": "ui_group",
        "name": "MainGroup",
        "tab": "4bb34f67.69a87",
        "order": 1,
        "disp": false,
        "width": "17",
        "collapse": false
    },
    {
        "id": "4bb34f67.69a87",
        "type": "ui_tab",
        "name": "Weather",
        "icon": "fa-thermometer-half",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "2a745e6b.07df92",
        "type": "ui_group",
        "name": "Default",
        "tab": "e63bce2d.68925",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "e63bce2d.68925",
        "type": "ui_tab",
        "name": "Denon",
        "icon": "dashboard",
        "order": 14,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "2908388b.8114b8",
        "type": "ui_group",
        "name": "Schuur lichtplan",
        "tab": "a28ff08f.3a822",
        "order": 1,
        "disp": false,
        "width": 17,
        "collapse": false
    },
    {
        "id": "a28ff08f.3a822",
        "type": "ui_tab",
        "name": "SVG",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "9f5b4cff.15cd3",
        "type": "ui_group",
        "name": "Floorplan test",
        "tab": "dabfe25b.13bc1",
        "order": 1,
        "disp": true,
        "width": "14",
        "collapse": false
    },
    {
        "id": "dabfe25b.13bc1",
        "type": "ui_tab",
        "name": "SVG",
        "icon": "dashboard",
        "order": 16,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "d2105318.aa703",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "e66edfe2.ea332",
        "order": 3,
        "width": 12,
        "height": 1
    },
    {
        "id": "d4b5416a.9c25f",
        "type": "ui_group",
        "name": "Floorplan test",
        "tab": "b9052fac.2b0e9",
        "order": 1,
        "disp": true,
        "width": "14",
        "collapse": false
    },
    {
        "id": "b9052fac.2b0e9",
        "type": "ui_tab",
        "name": "SVG",
        "icon": "dashboard",
        "order": 17,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "5a9e7538.2c2fbc",
        "type": "ui_group",
        "name": "Boundingbox test",
        "tab": "80f0e178.bbf4a",
        "order": 2,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "80f0e178.bbf4a",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "e9a45c1a.a0da",
        "type": "ui_group",
        "name": "G_2",
        "tab": "4c0b230b.9a171c",
        "order": 4,
        "disp": false,
        "width": "8",
        "collapse": false
    },
    {
        "id": "4c0b230b.9a171c",
        "type": "ui_tab",
        "name": "Drivecamlrgscreen",
        "icon": "dashboard",
        "order": 8
    },
    {
        "id": "1bb3935a.1f36ed",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "70fb931.dfc146c",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "783e98e0.d49d98",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "70fb931.dfc146c",
        "order": 5,
        "width": 4,
        "height": 1
    },
    {
        "id": "4c13ea5f.f18c84",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "70fb931.dfc146c",
        "order": 8,
        "width": 1,
        "height": 1
    },
    {
        "id": "87f50568.28e6a8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "70fb931.dfc146c",
        "order": 10,
        "width": 4,
        "height": 1
    },
    {
        "id": "5ffaed28.d8d494",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "70fb931.dfc146c",
        "order": 12,
        "width": 14,
        "height": 1
    },
    {
        "id": "dc780409.128898",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "70fb931.dfc146c",
        "order": 17,
        "width": 16,
        "height": 1
    },
    {
        "id": "a3384873.d060d8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "2908388b.8114b8",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "c4365fbf.eaed3",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "2908388b.8114b8",
        "order": 4,
        "width": 1,
        "height": 1
    },
    {
        "id": "57ceec62.29c144",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "2908388b.8114b8",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "51503386.00432c",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "2908388b.8114b8",
        "order": 6,
        "width": 1,
        "height": 1
    },
    {
        "id": "48ad749d.1ea2cc",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "2908388b.8114b8",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "d555f999.7c0ed8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "2908388b.8114b8",
        "order": 8,
        "width": 1,
        "height": 1
    },
    {
        "id": "458b15b1.a221dc",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "2908388b.8114b8",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "18d13711.065549",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "2908388b.8114b8",
        "order": 10,
        "width": 1,
        "height": 1
    },
    {
        "id": "38009ddc.858562",
        "type": "ui_group",
        "name": "Device management",
        "tab": "4d997c7f.f72024",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "f5594d13.23bec",
        "type": "mqtt-broker",
        "name": "mqtt",
        "broker": "mqtt",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "902c151e.212a38",
        "type": "ui_group",
        "name": "Device list",
        "tab": "4d997c7f.f72024",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "d40979a3.d11a08",
        "type": "ui_group",
        "name": "Bridge configuration",
        "tab": "4d997c7f.f72024",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "fd4925c4.d13458",
        "type": "ui_group",
        "name": "Network map",
        "tab": "6db85f70.6d8a2",
        "order": 1,
        "disp": false,
        "width": "27",
        "collapse": false
    },
    {
        "id": "ee188496.59ff28",
        "type": "ui_group",
        "name": "Device details",
        "tab": "4d997c7f.f72024",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "d9a11d4b.0417f",
        "type": "ui_group",
        "name": "Group configuration",
        "tab": "4d997c7f.f72024",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "4d997c7f.f72024",
        "type": "ui_tab",
        "name": "Z2M Admin",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "6db85f70.6d8a2",
        "type": "ui_tab",
        "name": "Z2M Network map",
        "icon": "dashboard",
        "order": 18,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "9ec8b304.368cc",
        "type": "ui_group",
        "name": "Home Floor Plan",
        "tab": "bb4f2a94.83b338",
        "order": 1,
        "disp": true,
        "width": "15",
        "collapse": false
    },
    {
        "id": "bb4f2a94.83b338",
        "type": "ui_tab",
        "name": "Home Floor Plan",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "1e86e070.517",
        "type": "catch",
        "z": "9aeafd2a.62224",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 2200,
        "y": 3480,
        "wires": [
            []
        ]
    },
    {
        "id": "9db42f61.fb743",
        "type": "mqtt in",
        "z": "9aeafd2a.62224",
        "name": "Sander presence",
        "topic": "wifi/192.168.2.70",
        "qos": "2",
        "datatype": "json",
        "broker": "4ec1ae6.5ee7c5",
        "x": 180,
        "y": 400,
        "wires": [
            [
                "6f1a3d.1f48a5c4"
            ]
        ]
    },
    {
        "id": "4850edcc.ed5f54",
        "type": "arp",
        "z": "9aeafd2a.62224",
        "name": "ARP",
        "macs": "",
        "x": 370,
        "y": 160,
        "wires": [
            [
                "e2c06e60.49408"
            ]
        ]
    },
    {
        "id": "9a86ea9f.29feb8",
        "type": "inject",
        "z": "9aeafd2a.62224",
        "name": "",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 160,
        "wires": [
            [
                "4850edcc.ed5f54"
            ]
        ]
    },
    {
        "id": "e2c06e60.49408",
        "type": "split",
        "z": "9aeafd2a.62224",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 530,
        "y": 160,
        "wires": [
            [
                "b8249e81.65604"
            ]
        ]
    },
    {
        "id": "1a6a4ec5.3f81f1",
        "type": "adv ping",
        "z": "9aeafd2a.62224",
        "name": "",
        "host": "",
        "x": 960,
        "y": 160,
        "wires": [
            [
                "462475c9.8fc48c"
            ]
        ]
    },
    {
        "id": "b8249e81.65604",
        "type": "function",
        "z": "9aeafd2a.62224",
        "name": "Analyze Result 2",
        "func": "// anything stored in context is kept available for next time we get called\ncontext.ip = \"\";\n\nif(msg.payload) {\n    if(msg.payload.ip) {\n    context.ip = msg.payload.ip;\n    }\n} \n\nmsg.host=context.ip;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 730,
        "y": 160,
        "wires": [
            [
                "1a6a4ec5.3f81f1"
            ]
        ]
    },
    {
        "id": "462475c9.8fc48c",
        "type": "function",
        "z": "9aeafd2a.62224",
        "name": "Analyze Result",
        "func": "// anything stored in context is kept available for next time we get called\n_context = {};\n\n_context.ip = msg._payload.ip;\n\nif(msg.payload) {\n  _context.pingresponse = msg.payload;\n  _context.home = 'Home';\n}\n\nmsg.payload = _context;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1180,
        "y": 160,
        "wires": [
            [
                "6901deee.a665b"
            ]
        ]
    },
    {
        "id": "f6e1ba11.cb7ad8",
        "type": "mqtt out",
        "z": "9aeafd2a.62224",
        "name": "Send info to mqtt",
        "topic": "",
        "qos": "2",
        "retain": "false",
        "broker": "4ec1ae6.5ee7c5",
        "x": 1630,
        "y": 160,
        "wires": []
    },
    {
        "id": "78e01b90.d23804",
        "type": "function",
        "z": "9aeafd2a.62224",
        "name": "",
        "func": "\nhome = 0;\nif(msg.payload) {\n    if(msg.payload.home == \"Home\") {\n        home = 2;\n    } else {\n        if(msg.payload.count) {\n            home = 1;\n        }\n    }\n}\nmsg.payload = home;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 510,
        "y": 400,
        "wires": [
            [
                "bf16e062.6ef71"
            ]
        ]
    },
    {
        "id": "bf16e062.6ef71",
        "type": "ui_led",
        "z": "9aeafd2a.62224",
        "order": 0,
        "group": "5b148da4.232e64",
        "width": 0,
        "height": 0,
        "label": "Sander",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "red",
                "value": "0",
                "valueType": "num"
            },
            {
                "color": "orange",
                "value": "1",
                "valueType": "num"
            },
            {
                "color": "green",
                "value": "2",
                "valueType": "num"
            }
        ],
        "allowColorForValueInMessage": false,
        "name": "",
        "x": 670,
        "y": 400,
        "wires": []
    },
    {
        "id": "7a94477b.4b2a68",
        "type": "mqtt in",
        "z": "9aeafd2a.62224",
        "name": "Bonny presence",
        "topic": "wifi/192.168.2.72",
        "qos": "2",
        "datatype": "json",
        "broker": "4ec1ae6.5ee7c5",
        "x": 180,
        "y": 480,
        "wires": [
            [
                "ce5d0528.7a06b8"
            ]
        ]
    },
    {
        "id": "64922542.bd2edc",
        "type": "mqtt in",
        "z": "9aeafd2a.62224",
        "name": "Jelmar presence",
        "topic": "wifi/192.168.2.71",
        "qos": "2",
        "datatype": "json",
        "broker": "4ec1ae6.5ee7c5",
        "x": 180,
        "y": 580,
        "wires": [
            [
                "5e34fd20.aed534"
            ]
        ]
    },
    {
        "id": "6901deee.a665b",
        "type": "function",
        "z": "9aeafd2a.62224",
        "name": "Determine status",
        "func": "// anything stored in context is kept available for next time we get called\n\n//_payload = {};\n_payload = msg.payload;\ndefault_count = 25 * 4;\n\nc = flow.get(msg.payload.ip + 'status') || \"Away\";\n_payload.changed = false;\n\nif(msg.payload.pingresponse) {\n  _payload.count = default_count;\n  flow.set(msg.payload.ip + 'count', _payload.count);\n  flow.set(msg.payload.ip + 'status', \"Home\");\n  if (c == \"Away\") {\n      _payload.changed = true;\n  }\n} else {\n    _payload.home = flow.get(msg.payload.ip + 'status') || \"Home\";\n    if (_payload.home == \"Home\") {\n        count = (flow.get(msg.payload.ip + 'count') || default_count);\n        _payload.count = count - 1;\n        flow.set(msg.payload.ip + 'count', _payload.count);\n        if (count <= 1) {\n            flow.set(msg.payload.ip + 'status', \"Away\");\n            _payload.home = \"Away\";\n            if (c == \"Home\") {\n              _payload.changed = true;\n          }\n        }\n    }\n}\n\nmsg.topic = \"wifi/\" + msg.payload.ip;\nmsg.payload = _payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1410,
        "y": 160,
        "wires": [
            [
                "f6e1ba11.cb7ad8"
            ]
        ]
    },
    {
        "id": "a4c8a10.b4a256",
        "type": "function",
        "z": "9aeafd2a.62224",
        "name": "",
        "func": "\nhome = 0;\nif(msg.payload) {\n    if(msg.payload.home == \"Home\") {\n        home = 2;\n    } else {\n        if(msg.payload.count) {\n            home = 1;\n        }\n    }\n}\nmsg.payload = home;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 510,
        "y": 480,
        "wires": [
            [
                "8d1461dd.24f4d"
            ]
        ]
    },
    {
        "id": "8d1461dd.24f4d",
        "type": "ui_led",
        "z": "9aeafd2a.62224",
        "order": 0,
        "group": "5b148da4.232e64",
        "width": 0,
        "height": 0,
        "label": "Bonny",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "red",
                "value": "0",
                "valueType": "num"
            },
            {
                "color": "orange",
                "value": "1",
                "valueType": "num"
            },
            {
                "color": "green",
                "value": "2",
                "valueType": "num"
            }
        ],
        "allowColorForValueInMessage": false,
        "name": "",
        "x": 670,
        "y": 480,
        "wires": []
    },
    {
        "id": "c3a1008a.2fb0a",
        "type": "function",
        "z": "9aeafd2a.62224",
        "name": "",
        "func": "\nhome = 0;\nif(msg.payload) {\n    if(msg.payload.home == \"Home\") {\n        home = 2;\n    } else {\n        if(msg.payload.count) {\n            home = 1;\n        }\n    }\n}\nmsg.payload = home;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 510,
        "y": 580,
        "wires": [
            [
                "9e89c5a0.da7d68"
            ]
        ]
    },
    {
        "id": "9e89c5a0.da7d68",
        "type": "ui_led",
        "z": "9aeafd2a.62224",
        "order": 0,
        "group": "5b148da4.232e64",
        "width": 0,
        "height": 0,
        "label": "Jelmar",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "red",
                "value": "0",
                "valueType": "num"
            },
            {
                "color": "orange",
                "value": "1",
                "valueType": "num"
            },
            {
                "color": "green",
                "value": "2",
                "valueType": "num"
            }
        ],
        "allowColorForValueInMessage": false,
        "name": "",
        "x": 670,
        "y": 580,
        "wires": []
    },
    {
        "id": "24f21ef4.90f8b2",
        "type": "function",
        "z": "9aeafd2a.62224",
        "name": "",
        "func": "home = \" is niet thuis\";\n\nif(msg.payload) {\n    if(msg.payload.home == \"Home\") {\n        home = \" is thuis\";\n    }\n}\nmsg.payload =  msg.payload.name + home;\n\nmsg.topic = \"#node-red\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1310,
        "y": 420,
        "wires": [
            [
                "fbffea83.0cd9d8"
            ]
        ]
    },
    {
        "id": "fbffea83.0cd9d8",
        "type": "slack-web-out",
        "z": "9aeafd2a.62224",
        "client": "11953a91.2f6945",
        "name": "Slack send",
        "x": 1490,
        "y": 420,
        "wires": [
            [
                "4476cd37.b23724"
            ]
        ]
    },
    {
        "id": "4476cd37.b23724",
        "type": "debug",
        "z": "9aeafd2a.62224",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1670,
        "y": 420,
        "wires": []
    },
    {
        "id": "5a1603cb.e4e14c",
        "type": "switch",
        "z": "9aeafd2a.62224",
        "name": "",
        "property": "payload.changed",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 420,
        "wires": [
            [
                "24f21ef4.90f8b2"
            ],
            []
        ]
    },
    {
        "id": "6f1a3d.1f48a5c4",
        "type": "function",
        "z": "9aeafd2a.62224",
        "name": "",
        "func": "\nmsg.payload.name = \"Sander\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 360,
        "y": 400,
        "wires": [
            [
                "4b6591b6.ccdda",
                "78e01b90.d23804"
            ]
        ]
    },
    {
        "id": "ce5d0528.7a06b8",
        "type": "function",
        "z": "9aeafd2a.62224",
        "name": "",
        "func": "\nmsg.payload.name = \"Bonny\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 350,
        "y": 480,
        "wires": [
            [
                "a4c8a10.b4a256",
                "d0a6a89b.de7198"
            ]
        ]
    },
    {
        "id": "5e34fd20.aed534",
        "type": "function",
        "z": "9aeafd2a.62224",
        "name": "",
        "func": "\nmsg.payload.name = \"Jelmar\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 350,
        "y": 580,
        "wires": [
            [
                "c3a1008a.2fb0a",
                "75c3c8e7.6d6d58"
            ]
        ]
    },
    {
        "id": "4b6591b6.ccdda",
        "type": "link out",
        "z": "9aeafd2a.62224",
        "name": "",
        "links": [
            "d614fb86.b52658"
        ],
        "x": 475,
        "y": 360,
        "wires": []
    },
    {
        "id": "d614fb86.b52658",
        "type": "link in",
        "z": "9aeafd2a.62224",
        "name": "",
        "links": [
            "4b6591b6.ccdda",
            "d0a6a89b.de7198",
            "75c3c8e7.6d6d58"
        ],
        "x": 1055,
        "y": 420,
        "wires": [
            [
                "5a1603cb.e4e14c"
            ]
        ]
    },
    {
        "id": "d0a6a89b.de7198",
        "type": "link out",
        "z": "9aeafd2a.62224",
        "name": "",
        "links": [
            "d614fb86.b52658"
        ],
        "x": 475,
        "y": 440,
        "wires": []
    },
    {
        "id": "75c3c8e7.6d6d58",
        "type": "link out",
        "z": "9aeafd2a.62224",
        "name": "",
        "links": [
            "d614fb86.b52658"
        ],
        "x": 475,
        "y": 540,
        "wires": []
    },
    {
        "id": "8acd9860.b2f158",
        "type": "mqtt in",
        "z": "d9d0239.9656ae",
        "name": "Lamp 1",
        "topic": "home assistant/lamp 1",
        "qos": "2",
        "datatype": "json",
        "broker": "4ec1ae6.5ee7c5",
        "x": 1270,
        "y": 140,
        "wires": [
            [
                "904255b1.449a18"
            ]
        ]
    },
    {
        "id": "69ec522f.6d1d0c",
        "type": "mqtt out",
        "z": "d9d0239.9656ae",
        "name": "Send info to Lamp 1 mqtt",
        "topic": "home assistant/lamp 1",
        "qos": "2",
        "retain": "false",
        "broker": "4ec1ae6.5ee7c5",
        "x": 890,
        "y": 380,
        "wires": []
    },
    {
        "id": "4c019b5e.f43f94",
        "type": "inject",
        "z": "d9d0239.9656ae",
        "name": "On",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"state\":\"ON\", \"color\":\"255,255,255\"}",
        "payloadType": "json",
        "x": 370,
        "y": 120,
        "wires": [
            [
                "5e24cb69.f4b594"
            ]
        ]
    },
    {
        "id": "e027a98b.b4bc88",
        "type": "zigbee2mqtt-out",
        "z": "d9d0239.9656ae",
        "name": "",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1760,
        "y": 80,
        "wires": []
    },
    {
        "id": "d47fbcf0.df305",
        "type": "zigbee2mqtt-out",
        "z": "d9d0239.9656ae",
        "name": "",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "color_rgb",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1760,
        "y": 140,
        "wires": []
    },
    {
        "id": "5f48a64.5315758",
        "type": "inject",
        "z": "d9d0239.9656ae",
        "name": "Off",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"state\":\"OFF\"}",
        "payloadType": "json",
        "x": 370,
        "y": 180,
        "wires": [
            [
                "5e24cb69.f4b594"
            ]
        ]
    },
    {
        "id": "3ca987db.090988",
        "type": "inject",
        "z": "d9d0239.9656ae",
        "name": "On",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"state\":\"ON\", \"color\":\"255,255,255\"}",
        "payloadType": "json",
        "x": 350,
        "y": 60,
        "wires": [
            [
                "5e24cb69.f4b594"
            ]
        ]
    },
    {
        "id": "99617b40.df7338",
        "type": "function",
        "z": "d9d0239.9656ae",
        "name": "state",
        "func": "msg.payload = msg.payload.state;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1590,
        "y": 80,
        "wires": [
            [
                "e027a98b.b4bc88"
            ]
        ]
    },
    {
        "id": "d14964e9.324bf8",
        "type": "function",
        "z": "d9d0239.9656ae",
        "name": "color",
        "func": "msg.payload = msg.payload.color;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1590,
        "y": 140,
        "wires": [
            [
                "d47fbcf0.df305"
            ]
        ]
    },
    {
        "id": "904255b1.449a18",
        "type": "switch",
        "z": "d9d0239.9656ae",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "state",
                "vt": "str"
            },
            {
                "t": "hask",
                "v": "color",
                "vt": "str"
            },
            {
                "t": "hask",
                "v": "brightness",
                "vt": "str"
            },
            {
                "t": "hask",
                "v": "temp",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1410,
        "y": 140,
        "wires": [
            [
                "99617b40.df7338"
            ],
            [
                "d14964e9.324bf8"
            ],
            [
                "c96277f2.a53998"
            ],
            [
                "9b209961.9049e8"
            ]
        ]
    },
    {
        "id": "abad01d5.a0735",
        "type": "inject",
        "z": "d9d0239.9656ae",
        "name": "toggle",
        "props": [
            {
                "p": "payload",
                "v": "{\"state\":\"toggle\"}",
                "vt": "json"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"state\":\"toggle\"}",
        "payloadType": "json",
        "x": 370,
        "y": 240,
        "wires": [
            [
                "5e24cb69.f4b594"
            ]
        ]
    },
    {
        "id": "8c1b4cc5.73aa6",
        "type": "ui_button",
        "z": "d9d0239.9656ae",
        "name": "",
        "group": "5b148da4.232e64",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Toggle lamp 1",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "{\"state\":\"toggle\"}",
        "payloadType": "json",
        "topic": "",
        "x": 200,
        "y": 340,
        "wires": [
            [
                "5e24cb69.f4b594"
            ]
        ]
    },
    {
        "id": "a1118652.a6cab8",
        "type": "ui_colour_picker",
        "z": "d9d0239.9656ae",
        "name": "Color Lamp 1",
        "label": "Color Lamp 1",
        "group": "5b148da4.232e64",
        "format": "rgb",
        "outformat": "object",
        "showSwatch": true,
        "showPicker": false,
        "showValue": false,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "",
        "x": 200,
        "y": 380,
        "wires": [
            [
                "5b9deeed.d2c7b"
            ]
        ]
    },
    {
        "id": "5b9deeed.d2c7b",
        "type": "function",
        "z": "d9d0239.9656ae",
        "name": "",
        "func": "\nvalue = {};\nc = msg.payload;\nvalue.color = c.r + \",\" + c.g + \",\" + c.b;\nvalue.state = \"on\";\n\nmsg.payload = value;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 390,
        "y": 380,
        "wires": [
            [
                "5e24cb69.f4b594"
            ]
        ]
    },
    {
        "id": "6bc8cf23.1decc",
        "type": "zigbee2mqtt-out",
        "z": "d9d0239.9656ae",
        "name": "",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "brightness",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1760,
        "y": 200,
        "wires": []
    },
    {
        "id": "c96277f2.a53998",
        "type": "function",
        "z": "d9d0239.9656ae",
        "name": "brightness",
        "func": "msg.payload = msg.payload.brightness;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1610,
        "y": 200,
        "wires": [
            [
                "6bc8cf23.1decc"
            ]
        ]
    },
    {
        "id": "9f515e7c.581e3",
        "type": "ui_slider",
        "z": "d9d0239.9656ae",
        "name": "Brightness Lamp 1",
        "label": "Brightness Lamp 1",
        "tooltip": "",
        "group": "5b148da4.232e64",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "all",
        "topic": "",
        "min": 0,
        "max": "254",
        "step": 1,
        "x": 170,
        "y": 300,
        "wires": [
            [
                "f3383d4a.2347b"
            ]
        ]
    },
    {
        "id": "f3383d4a.2347b",
        "type": "function",
        "z": "d9d0239.9656ae",
        "name": "",
        "func": "\nvalue = {};\nvalue.brightness = msg.payload;\nvalue.state = \"on\";\n\nmsg.payload = value;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 380,
        "y": 320,
        "wires": [
            [
                "5e24cb69.f4b594"
            ]
        ]
    },
    {
        "id": "5e24cb69.f4b594",
        "type": "function",
        "z": "d9d0239.9656ae",
        "name": "",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 690,
        "y": 380,
        "wires": [
            [
                "69ec522f.6d1d0c"
            ]
        ]
    },
    {
        "id": "6437ff01.981f4",
        "type": "ui_button",
        "z": "d9d0239.9656ae",
        "name": "",
        "group": "5b148da4.232e64",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Aan",
        "tooltip": "Lamp",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "{\"state\":\"ON\", \"color\":\"255,255,255\"}",
        "payloadType": "json",
        "topic": "",
        "x": 170,
        "y": 460,
        "wires": [
            [
                "5e24cb69.f4b594"
            ]
        ]
    },
    {
        "id": "7ffd389c.ea5ae8",
        "type": "ui_button",
        "z": "d9d0239.9656ae",
        "name": "",
        "group": "5b148da4.232e64",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Uit",
        "tooltip": "Lamp",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "{\"state\":\"OFF\"}",
        "payloadType": "json",
        "topic": "",
        "x": 170,
        "y": 500,
        "wires": [
            [
                "5e24cb69.f4b594"
            ]
        ]
    },
    {
        "id": "ba32f344.363f5",
        "type": "mqtt out",
        "z": "d9d0239.9656ae",
        "name": "Send info to oprit mqtt",
        "topic": "home assistant/oprit",
        "qos": "2",
        "retain": "false",
        "broker": "4ec1ae6.5ee7c5",
        "x": 920,
        "y": 600,
        "wires": []
    },
    {
        "id": "3a89e7ff.5213e8",
        "type": "ui_button",
        "z": "d9d0239.9656ae",
        "name": "",
        "group": "5b148da4.232e64",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Toggle oprit",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "{\"state\":\"toggle\"}",
        "payloadType": "json",
        "topic": "",
        "x": 190,
        "y": 560,
        "wires": [
            [
                "543372df.c121dc"
            ]
        ]
    },
    {
        "id": "a02ca441.8fb4a8",
        "type": "ui_colour_picker",
        "z": "d9d0239.9656ae",
        "name": "Color oprit 1",
        "label": "Color oprit 1",
        "group": "5b148da4.232e64",
        "format": "rgb",
        "outformat": "object",
        "showSwatch": true,
        "showPicker": false,
        "showValue": false,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "",
        "x": 190,
        "y": 600,
        "wires": [
            [
                "66866646.ee2a68"
            ]
        ]
    },
    {
        "id": "82bd5232.391ec",
        "type": "ui_button",
        "z": "d9d0239.9656ae",
        "name": "",
        "group": "5b148da4.232e64",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Aan",
        "tooltip": "Oprit",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "{\"state\":\"ON\", \"color\":\"255,255,255\"}",
        "payloadType": "json",
        "topic": "",
        "x": 170,
        "y": 680,
        "wires": [
            [
                "543372df.c121dc"
            ]
        ]
    },
    {
        "id": "c7114eff.f91a5",
        "type": "ui_button",
        "z": "d9d0239.9656ae",
        "name": "",
        "group": "5b148da4.232e64",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Uit",
        "tooltip": "Oprit",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "{\"state\":\"OFF\"}",
        "payloadType": "json",
        "topic": "",
        "x": 170,
        "y": 720,
        "wires": [
            [
                "543372df.c121dc"
            ]
        ]
    },
    {
        "id": "66866646.ee2a68",
        "type": "function",
        "z": "d9d0239.9656ae",
        "name": "",
        "func": "\nvalue = {};\nc = msg.payload;\nvalue.color = c.r + \",\" + c.g + \",\" + c.b;\nvalue.state = \"on\";\n\nmsg.payload = value;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 390,
        "y": 600,
        "wires": [
            [
                "543372df.c121dc"
            ]
        ]
    },
    {
        "id": "543372df.c121dc",
        "type": "function",
        "z": "d9d0239.9656ae",
        "name": "",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 710,
        "y": 600,
        "wires": [
            [
                "ba32f344.363f5"
            ]
        ]
    },
    {
        "id": "d691d08a.db6b3",
        "type": "zigbee2mqtt-bridge",
        "z": "b373cb64.b32288",
        "name": "Zigbee",
        "server": "54720da2.31fe84",
        "topic": null,
        "x": 530,
        "y": 80,
        "wires": [
            [
                "611eac0a.97eb94"
            ]
        ]
    },
    {
        "id": "611eac0a.97eb94",
        "type": "debug",
        "z": "b373cb64.b32288",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 850,
        "y": 80,
        "wires": []
    },
    {
        "id": "5f95b5b4.66211c",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Roan",
        "server": "54720da2.31fe84",
        "friendly_name": "Roan",
        "device_id": "0x00158d0003538d84",
        "state": "0",
        "x": 530,
        "y": 220,
        "wires": [
            [
                "718868eb.9a9ef8"
            ]
        ]
    },
    {
        "id": "6878397f.211708",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Jelmar",
        "server": "54720da2.31fe84",
        "friendly_name": "Jelmar",
        "device_id": "0x00158d0003a3519d",
        "state": "0",
        "x": 530,
        "y": 160,
        "wires": [
            [
                "8d2f9b40.563328"
            ]
        ]
    },
    {
        "id": "da277ed1.50022",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Senne",
        "server": "54720da2.31fe84",
        "friendly_name": "Senne",
        "device_id": "0x00158d0003cebcba",
        "state": "0",
        "x": 530,
        "y": 280,
        "wires": [
            [
                "a99bf95.6bc5608"
            ]
        ]
    },
    {
        "id": "8d2f9b40.563328",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "state = false;\nif (msg.payload.contact) {\n    state = true;\n} else {\n    state = false;\n}\n\nmsg.payload = state;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 810,
        "y": 160,
        "wires": [
            [
                "8921e242.0b6ed"
            ]
        ]
    },
    {
        "id": "8921e242.0b6ed",
        "type": "ui_led",
        "z": "b373cb64.b32288",
        "order": 2,
        "group": "e480e105.3a76c",
        "width": 0,
        "height": 0,
        "label": "Deur Jelmar",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "red",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "green",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": true,
        "shape": "circle",
        "showGlow": true,
        "name": "Deur Jelmar",
        "x": 1010,
        "y": 160,
        "wires": []
    },
    {
        "id": "718868eb.9a9ef8",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "state = false;\nif (msg.payload.contact) {\n    state = true;\n} else {\n    state = false;\n}\n\nmsg.payload = state;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 810,
        "y": 220,
        "wires": [
            [
                "b12a9893.55b248"
            ]
        ]
    },
    {
        "id": "b12a9893.55b248",
        "type": "ui_led",
        "z": "b373cb64.b32288",
        "order": 3,
        "group": "e480e105.3a76c",
        "width": 0,
        "height": 0,
        "label": "Deur Roan",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "red",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "green",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": true,
        "name": "Deur Roan",
        "x": 1010,
        "y": 220,
        "wires": []
    },
    {
        "id": "a99bf95.6bc5608",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "state = false;\nif (msg.payload.contact) {\n    state = true;\n} else {\n    state = false;\n}\n\nmsg.payload = state;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 810,
        "y": 280,
        "wires": [
            [
                "518d3bd5.2af4d4"
            ]
        ]
    },
    {
        "id": "518d3bd5.2af4d4",
        "type": "ui_led",
        "z": "b373cb64.b32288",
        "order": 4,
        "group": "e480e105.3a76c",
        "width": 0,
        "height": 0,
        "label": "Deur Senne",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "red",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "green",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": true,
        "name": "Deur Senne",
        "x": 1010,
        "y": 280,
        "wires": []
    },
    {
        "id": "31dc9343.80d85c",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Zolder",
        "server": "54720da2.31fe84",
        "friendly_name": "Zolder",
        "device_id": "0x00158d0003a354c8",
        "state": "0",
        "x": 530,
        "y": 340,
        "wires": [
            [
                "2a045361.f5266c"
            ]
        ]
    },
    {
        "id": "2a045361.f5266c",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "state = false;\nif (msg.payload.contact) {\n    state = true;\n} else {\n    state = false;\n}\n\nmsg.payload = state;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 810,
        "y": 340,
        "wires": [
            [
                "eb60f9e1.850748"
            ]
        ]
    },
    {
        "id": "eb60f9e1.850748",
        "type": "ui_led",
        "z": "b373cb64.b32288",
        "order": 5,
        "group": "e480e105.3a76c",
        "width": 0,
        "height": 0,
        "label": "Deur Zolder",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "red",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "green",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": true,
        "name": "Deur Zolder",
        "x": 1010,
        "y": 340,
        "wires": []
    },
    {
        "id": "fe0e3485.d256e8",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Heit en mem",
        "server": "54720da2.31fe84",
        "friendly_name": "0x00158d0003c79a0e",
        "device_id": "0x00158d0003c79a0e",
        "state": "0",
        "x": 550,
        "y": 400,
        "wires": [
            [
                "887cca9d.656408"
            ]
        ]
    },
    {
        "id": "887cca9d.656408",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "state = false;\nif (msg.payload.contact) {\n    state = true;\n} else {\n    state = false;\n}\n\nmsg.payload = state;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 810,
        "y": 400,
        "wires": [
            [
                "68775e3c.a2bf1"
            ]
        ]
    },
    {
        "id": "68775e3c.a2bf1",
        "type": "ui_led",
        "z": "b373cb64.b32288",
        "order": 6,
        "group": "e480e105.3a76c",
        "width": 0,
        "height": 0,
        "label": "Deur heit en mem",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "red",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "green",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": true,
        "name": "Deur heit en mem",
        "x": 1030,
        "y": 400,
        "wires": []
    },
    {
        "id": "bc5ae961.cb00e8",
        "type": "ui_button",
        "z": "b373cb64.b32288",
        "name": "",
        "group": "e480e105.3a76c",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Check",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 190,
        "y": 340,
        "wires": [
            [
                "c5093a0d.328da8"
            ]
        ]
    },
    {
        "id": "13c0c30.18d963d",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Schuur",
        "server": "54720da2.31fe84",
        "friendly_name": "Schuur",
        "device_id": "0x00158d000353b015",
        "state": "0",
        "x": 540,
        "y": 500,
        "wires": [
            [
                "834f3802.576ce8"
            ]
        ]
    },
    {
        "id": "834f3802.576ce8",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "state = false;\nif (msg.payload.contact) {\n    state = true;\n} else {\n    state = false;\n}\n\nmsg.payload = state;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 810,
        "y": 500,
        "wires": [
            [
                "3b6dcb73.020eb4"
            ]
        ]
    },
    {
        "id": "3b6dcb73.020eb4",
        "type": "ui_led",
        "z": "b373cb64.b32288",
        "order": 7,
        "group": "e480e105.3a76c",
        "width": 0,
        "height": 0,
        "label": "Deur schuur",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "red",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "green",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": true,
        "name": "Deur Zolder",
        "x": 1010,
        "y": 500,
        "wires": []
    },
    {
        "id": "a64c74f6.6fddb8",
        "type": "inject",
        "z": "d9d0239.9656ae",
        "name": "Off",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"state\":\"off\"}",
        "payloadType": "json",
        "x": 550,
        "y": 460,
        "wires": [
            [
                "543372df.c121dc"
            ]
        ]
    },
    {
        "id": "da86bab2.6e65c8",
        "type": "inject",
        "z": "d9d0239.9656ae",
        "name": "On",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"state\":\"ON\", \"color\":\"0,255,0\"}",
        "payloadType": "json",
        "x": 550,
        "y": 520,
        "wires": [
            [
                "543372df.c121dc"
            ]
        ]
    },
    {
        "id": "67a71c47.6870b4",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Raam heit en mem",
        "server": "54720da2.31fe84",
        "friendly_name": "Raam heit en mem",
        "device_id": "0x00158d00025d69ff",
        "state": "0",
        "x": 570,
        "y": 460,
        "wires": [
            [
                "4259c267.c93b4c"
            ]
        ]
    },
    {
        "id": "4259c267.c93b4c",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "state = false;\nif (msg.payload.contact) {\n    state = true;\n} else {\n    state = false;\n}\n\nmsg.payload = state;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 810,
        "y": 460,
        "wires": [
            [
                "13cb466d.5749fa"
            ]
        ]
    },
    {
        "id": "13cb466d.5749fa",
        "type": "ui_led",
        "z": "b373cb64.b32288",
        "order": 8,
        "group": "e480e105.3a76c",
        "width": 0,
        "height": 0,
        "label": "Raam heit en mem",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "red",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "green",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": true,
        "name": "Raam heit en mem",
        "x": 1030,
        "y": 460,
        "wires": []
    },
    {
        "id": "fa94f0aa.697cd",
        "type": "link in",
        "z": "b373cb64.b32288",
        "name": "",
        "links": [
            "c5093a0d.328da8"
        ],
        "x": 395,
        "y": 340,
        "wires": [
            [
                "6878397f.211708",
                "5f95b5b4.66211c",
                "da277ed1.50022",
                "31dc9343.80d85c",
                "fe0e3485.d256e8",
                "67a71c47.6870b4",
                "13c0c30.18d963d"
            ]
        ]
    },
    {
        "id": "c5093a0d.328da8",
        "type": "link out",
        "z": "b373cb64.b32288",
        "name": "",
        "links": [
            "fa94f0aa.697cd",
            "344d85ba.71dc1a"
        ],
        "x": 315,
        "y": 340,
        "wires": []
    },
    {
        "id": "ea726c8b.059fd",
        "type": "slack-web-out",
        "z": "b373cb64.b32288",
        "client": "11953a91.2f6945",
        "name": "Slack send",
        "x": 1170,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "d7229f3.9507b6",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "Deur heit en mem",
        "func": "msg.payload.name = node.name;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1210,
        "y": 686,
        "wires": [
            [
                "b57eaed5.852e5"
            ]
        ]
    },
    {
        "id": "3657f936.6ff626",
        "type": "zigbee2mqtt-in",
        "z": "b373cb64.b32288",
        "name": "Heit en mem",
        "server": "54720da2.31fe84",
        "friendly_name": "Heit en mem",
        "device_id": "0x00158d0003c79a0e",
        "state": "0",
        "outputAtStartup": true,
        "x": 75,
        "y": 695,
        "wires": [
            [
                "d939fcde.3a398"
            ]
        ]
    },
    {
        "id": "aa455861.2ebc48",
        "type": "zigbee2mqtt-in",
        "z": "b373cb64.b32288",
        "name": "Senne",
        "server": "54720da2.31fe84",
        "friendly_name": "Senne",
        "device_id": "0x00158d0003cebcba",
        "state": "0",
        "outputAtStartup": true,
        "x": 55,
        "y": 766,
        "wires": [
            [
                "f566786c.e4ea38"
            ]
        ]
    },
    {
        "id": "3e25c8a1.e3cab8",
        "type": "zigbee2mqtt-in",
        "z": "b373cb64.b32288",
        "name": "Roan",
        "server": "54720da2.31fe84",
        "friendly_name": "Roan",
        "device_id": "0x00158d0003538d84",
        "state": "0",
        "outputAtStartup": true,
        "x": 55,
        "y": 826,
        "wires": [
            [
                "11777a1f.bf1a56"
            ]
        ]
    },
    {
        "id": "e8a6a4f9.a45558",
        "type": "zigbee2mqtt-in",
        "z": "b373cb64.b32288",
        "name": "Jelmar",
        "server": "54720da2.31fe84",
        "friendly_name": "Jelmar",
        "device_id": "0x00158d0003a3519d",
        "state": "0",
        "outputAtStartup": true,
        "x": 55,
        "y": 886,
        "wires": [
            [
                "e04de5a2.5eef98"
            ]
        ]
    },
    {
        "id": "f18218a3.c5e098",
        "type": "zigbee2mqtt-in",
        "z": "b373cb64.b32288",
        "name": "Zolder",
        "server": "54720da2.31fe84",
        "friendly_name": "Zolder",
        "device_id": "0x00158d0003a354c8",
        "state": "0",
        "outputAtStartup": true,
        "x": 55,
        "y": 946,
        "wires": [
            [
                "378be3.1aa2641e"
            ]
        ]
    },
    {
        "id": "71c2000c.ed081",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "Deur Senne",
        "func": "msg.payload.name = node.name;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1190,
        "y": 761,
        "wires": [
            [
                "b57eaed5.852e5"
            ]
        ]
    },
    {
        "id": "f775caff.b743a8",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "Deur Roan",
        "func": "msg.payload.name = node.name;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1190,
        "y": 819,
        "wires": [
            [
                "b57eaed5.852e5"
            ]
        ]
    },
    {
        "id": "847a6c06.1750b",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "Deur Jelmar",
        "func": "msg.payload.name = node.name;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1190,
        "y": 879,
        "wires": [
            [
                "b57eaed5.852e5"
            ]
        ]
    },
    {
        "id": "152afccd.359c23",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "Deur zolder",
        "func": "msg.payload.name = node.name;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1190,
        "y": 939,
        "wires": [
            [
                "b57eaed5.852e5"
            ]
        ]
    },
    {
        "id": "aa56aeac.c95ce",
        "type": "zigbee2mqtt-in",
        "z": "b373cb64.b32288",
        "name": "Raam heit en mem",
        "server": "54720da2.31fe84",
        "friendly_name": "Raam heit en mem",
        "device_id": "0x00158d00025d69ff",
        "state": "0",
        "outputAtStartup": true,
        "x": 95,
        "y": 633,
        "wires": [
            [
                "d7cd0d9a.5537d"
            ]
        ]
    },
    {
        "id": "74e1fb6c.5371b4",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "Raam heit en mem",
        "func": "msg.payload.name = node.name;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1210,
        "y": 626,
        "wires": [
            [
                "b57eaed5.852e5"
            ]
        ]
    },
    {
        "id": "7207eb64.318224",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "SetMessage",
        "func": "if (msg.payload.contact) {\n   msg.payload = msg.payload.name + \" dicht\"\n} else {\n   msg.payload = msg.payload.name + \" open\"\n}\n\nmsg.topic = \"#node-red\"\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 990,
        "y": 1120,
        "wires": [
            [
                "ea726c8b.059fd"
            ]
        ]
    },
    {
        "id": "dcdfa27c.ae76f",
        "type": "delay",
        "z": "b373cb64.b32288",
        "name": "",
        "pauseType": "delayv",
        "timeout": "10",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 596,
        "y": 658,
        "wires": [
            [
                "62dfe114.b62d4"
            ]
        ]
    },
    {
        "id": "62dfe114.b62d4",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Raam heit en mem",
        "server": "54720da2.31fe84",
        "friendly_name": "Raam heit en mem",
        "device_id": "0x00158d00025d69ff",
        "state": "0",
        "x": 806,
        "y": 658,
        "wires": [
            [
                "908025c0.523438"
            ]
        ]
    },
    {
        "id": "310417e4.bf36c8",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Schuur",
        "server": "54720da2.31fe84",
        "friendly_name": "Schuur",
        "device_id": "0x00158d000353b015",
        "state": "0",
        "x": 776,
        "y": 1026,
        "wires": [
            [
                "faedae4b.6473b"
            ]
        ]
    },
    {
        "id": "1972a64c.dd45ba",
        "type": "zigbee2mqtt-in",
        "z": "b373cb64.b32288",
        "name": "Schuur",
        "server": "54720da2.31fe84",
        "friendly_name": "Zolder",
        "device_id": "0x00158d0003a354c8",
        "state": "0",
        "outputAtStartup": true,
        "x": 55,
        "y": 1006,
        "wires": [
            [
                "1883d186.c5e64e"
            ]
        ]
    },
    {
        "id": "1a32cd5f.6b92e3",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "Deur schuur",
        "func": "msg.payload.name = node.name;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1192,
        "y": 1003,
        "wires": [
            [
                "b57eaed5.852e5"
            ]
        ]
    },
    {
        "id": "d939fcde.3a398",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 270,
        "y": 695,
        "wires": [
            [
                "d7229f3.9507b6"
            ],
            [
                "15625093.4435ef"
            ]
        ]
    },
    {
        "id": "f566786c.e4ea38",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 270,
        "y": 766,
        "wires": [
            [
                "71c2000c.ed081"
            ],
            [
                "ea22a52a.472598"
            ]
        ]
    },
    {
        "id": "11777a1f.bf1a56",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 270,
        "y": 826,
        "wires": [
            [
                "f775caff.b743a8"
            ],
            [
                "eb90fe29.b5571"
            ]
        ]
    },
    {
        "id": "e04de5a2.5eef98",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 270,
        "y": 886,
        "wires": [
            [
                "847a6c06.1750b"
            ],
            [
                "b21616ac.c8d6f8"
            ]
        ]
    },
    {
        "id": "378be3.1aa2641e",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 270,
        "y": 946,
        "wires": [
            [
                "152afccd.359c23"
            ],
            [
                "c5f3564.d8c31a8"
            ]
        ]
    },
    {
        "id": "1883d186.c5e64e",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 270,
        "y": 1006,
        "wires": [
            [
                "1a32cd5f.6b92e3"
            ],
            [
                "498487f0.527178"
            ]
        ]
    },
    {
        "id": "b1723d9e.bfb69",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Jelmar",
        "server": "54720da2.31fe84",
        "friendly_name": "Jelmar",
        "device_id": "0x00158d0003a3519d",
        "state": "0",
        "x": 766,
        "y": 906,
        "wires": [
            [
                "79a276fc.fb6548"
            ]
        ]
    },
    {
        "id": "b312bec9.a04d1",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Heit en mem",
        "server": "54720da2.31fe84",
        "friendly_name": "0x00158d0003c79a0e",
        "device_id": "0x00158d0003c79a0e",
        "state": "0",
        "x": 786,
        "y": 718,
        "wires": [
            [
                "43143b44.e36f74"
            ]
        ]
    },
    {
        "id": "7ac6bb6e.29f7d4",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Zolder",
        "server": "54720da2.31fe84",
        "friendly_name": "Zolder",
        "device_id": "0x00158d0003a354c8",
        "state": "0",
        "x": 766,
        "y": 966,
        "wires": [
            [
                "a6e0078e.aab9f8"
            ]
        ]
    },
    {
        "id": "c9fd6998.b1dc78",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Roan",
        "server": "54720da2.31fe84",
        "friendly_name": "Roan",
        "device_id": "0x00158d0003538d84",
        "state": "0",
        "x": 766,
        "y": 846,
        "wires": [
            []
        ]
    },
    {
        "id": "a2a1b2fb.064df",
        "type": "zigbee2mqtt-get",
        "z": "b373cb64.b32288",
        "name": "Senne",
        "server": "54720da2.31fe84",
        "friendly_name": "Senne",
        "device_id": "0x00158d0003cebcba",
        "state": "0",
        "x": 766,
        "y": 786,
        "wires": [
            [
                "1ff27a5b.a2fd76"
            ]
        ]
    },
    {
        "id": "efd169.8d056e98",
        "type": "delay",
        "z": "b373cb64.b32288",
        "name": "",
        "pauseType": "delayv",
        "timeout": "10",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 596,
        "y": 718,
        "wires": [
            [
                "b312bec9.a04d1"
            ]
        ]
    },
    {
        "id": "f76628aa.58ce08",
        "type": "delay",
        "z": "b373cb64.b32288",
        "name": "",
        "pauseType": "delayv",
        "timeout": "10",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 596,
        "y": 786,
        "wires": [
            [
                "a2a1b2fb.064df"
            ]
        ]
    },
    {
        "id": "45f02965.ad6688",
        "type": "delay",
        "z": "b373cb64.b32288",
        "name": "",
        "pauseType": "delayv",
        "timeout": "10",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 596,
        "y": 846,
        "wires": [
            [
                "186a8c8a.015d33"
            ]
        ]
    },
    {
        "id": "50f449c5.732e58",
        "type": "delay",
        "z": "b373cb64.b32288",
        "name": "",
        "pauseType": "delayv",
        "timeout": "10",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 596,
        "y": 906,
        "wires": [
            [
                "b1723d9e.bfb69"
            ]
        ]
    },
    {
        "id": "a981af56.f1652",
        "type": "delay",
        "z": "b373cb64.b32288",
        "name": "",
        "pauseType": "delayv",
        "timeout": "10",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 596,
        "y": 966,
        "wires": [
            [
                "7ac6bb6e.29f7d4"
            ]
        ]
    },
    {
        "id": "368cf59b.34da6a",
        "type": "delay",
        "z": "b373cb64.b32288",
        "name": "",
        "pauseType": "delayv",
        "timeout": "10",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 596,
        "y": 1026,
        "wires": [
            [
                "310417e4.bf36c8"
            ]
        ]
    },
    {
        "id": "908025c0.523438",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 983,
        "y": 658,
        "wires": [
            [],
            [
                "74e1fb6c.5371b4"
            ]
        ]
    },
    {
        "id": "43143b44.e36f74",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 983,
        "y": 718,
        "wires": [
            [],
            [
                "d7229f3.9507b6"
            ]
        ]
    },
    {
        "id": "1ff27a5b.a2fd76",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 983,
        "y": 786,
        "wires": [
            [],
            [
                "71c2000c.ed081"
            ]
        ]
    },
    {
        "id": "186a8c8a.015d33",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 983,
        "y": 846,
        "wires": [
            [],
            [
                "f775caff.b743a8"
            ]
        ]
    },
    {
        "id": "79a276fc.fb6548",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 983,
        "y": 906,
        "wires": [
            [],
            [
                "847a6c06.1750b"
            ]
        ]
    },
    {
        "id": "a6e0078e.aab9f8",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 983,
        "y": 966,
        "wires": [
            [],
            [
                "152afccd.359c23"
            ]
        ]
    },
    {
        "id": "faedae4b.6473b",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 983,
        "y": 1026,
        "wires": [
            [],
            [
                "1a32cd5f.6b92e3"
            ]
        ]
    },
    {
        "id": "dd4f82ac.64915",
        "type": "time-range-switch",
        "z": "b373cb64.b32288",
        "name": "",
        "lat": "53.179832",
        "lon": "6.168285",
        "startTime": "08:00",
        "endTime": "21:30",
        "startOffset": 0,
        "endOffset": 0,
        "x": 451,
        "y": 1132,
        "wires": [
            [
                "afb8e602.c0e788"
            ],
            [
                "8ec49a94.cda708"
            ]
        ]
    },
    {
        "id": "9a68c4e2.582198",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "payload.changed",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 1126,
        "wires": [
            [
                "7207eb64.318224",
                "dc7afc1c.44af3"
            ],
            []
        ]
    },
    {
        "id": "8ec49a94.cda708",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "nacht",
        "func": "msg.payload.changed = false;\n\nif (msg.payload.contact) {\n   flow.set(msg.payload.name && \"_\", \"dicht\");\n} else {\n   flow.set(msg.payload.name && \"_\", \"open\");\n}\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 650,
        "y": 1180,
        "wires": [
            [
                "9a68c4e2.582198"
            ]
        ]
    },
    {
        "id": "b57eaed5.852e5",
        "type": "link out",
        "z": "b373cb64.b32288",
        "name": "",
        "links": [
            "5f78496f.444b18"
        ],
        "x": 1455,
        "y": 860,
        "wires": []
    },
    {
        "id": "5f78496f.444b18",
        "type": "link in",
        "z": "b373cb64.b32288",
        "name": "",
        "links": [
            "b57eaed5.852e5"
        ],
        "x": 316,
        "y": 1132,
        "wires": [
            [
                "dd4f82ac.64915"
            ]
        ]
    },
    {
        "id": "afb8e602.c0e788",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "Overdag",
        "func": "msg.payload.changed = false;\n\nc = flow.get(msg.payload.name && \"_\") || \"none\";\nmsg.payload.old = c;\nif (msg.payload.contact) {\n   flow.set(msg.payload.name && \"_\", \"dicht\");\n   if (c!= \"dicht\") {\n       msg.payload.changed = true;\n   }\n} else {\n   flow.set(msg.payload.name && \"_\", \"open\");\n   if (c != \"open\") {\n       msg.payload.changed = true;\n   }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 646,
        "y": 1126,
        "wires": [
            [
                "9a68c4e2.582198"
            ]
        ]
    },
    {
        "id": "d7cd0d9a.5537d",
        "type": "switch",
        "z": "b373cb64.b32288",
        "name": "",
        "property": "msg.payload.contact",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 270,
        "y": 632,
        "wires": [
            [
                "74e1fb6c.5371b4"
            ],
            [
                "4fc373a8.454f4c"
            ]
        ]
    },
    {
        "id": "4fc373a8.454f4c",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "msg.payload.delay = flow.delay;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 432,
        "y": 658,
        "wires": [
            [
                "dcdfa27c.ae76f"
            ]
        ]
    },
    {
        "id": "efe2276c.a6c748",
        "type": "inject",
        "z": "b373cb64.b32288",
        "name": "Set delay every 10 minutes",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 260,
        "y": 560,
        "wires": [
            [
                "fcfb23c9.6bc24"
            ]
        ]
    },
    {
        "id": "15625093.4435ef",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "msg.payload.delay = flow.delay;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 430,
        "y": 718,
        "wires": [
            [
                "efd169.8d056e98"
            ]
        ]
    },
    {
        "id": "ea22a52a.472598",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "msg.payload.delay = flow.delay;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 430,
        "y": 786,
        "wires": [
            [
                "f76628aa.58ce08"
            ]
        ]
    },
    {
        "id": "eb90fe29.b5571",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "msg.payload.delay = flow.delay;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 430,
        "y": 846,
        "wires": [
            [
                "45f02965.ad6688"
            ]
        ]
    },
    {
        "id": "b21616ac.c8d6f8",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "msg.payload.delay = flow.delay;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 430,
        "y": 906,
        "wires": [
            [
                "50f449c5.732e58"
            ]
        ]
    },
    {
        "id": "c5f3564.d8c31a8",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "msg.payload.delay = flow.delay;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 428,
        "y": 966,
        "wires": [
            [
                "a981af56.f1652"
            ]
        ]
    },
    {
        "id": "498487f0.527178",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "",
        "func": "msg.payload.delay = flow.delay;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 430,
        "y": 1026,
        "wires": [
            [
                "368cf59b.34da6a"
            ]
        ]
    },
    {
        "id": "dc7afc1c.44af3",
        "type": "debug",
        "z": "b373cb64.b32288",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1230,
        "y": 1200,
        "wires": []
    },
    {
        "id": "fcfb23c9.6bc24",
        "type": "time-range-switch",
        "z": "b373cb64.b32288",
        "name": "",
        "lat": "53.179832",
        "lon": "6.168285",
        "startTime": "08:00",
        "endTime": "21:30",
        "startOffset": 0,
        "endOffset": 0,
        "x": 490,
        "y": 560,
        "wires": [
            [
                "37c0e13.962a81e"
            ],
            [
                "aa06d8cf.004788"
            ]
        ]
    },
    {
        "id": "37c0e13.962a81e",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "Set delay 5",
        "func": "flow.set(\"delay\", 1);\n   \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 670,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "aa06d8cf.004788",
        "type": "function",
        "z": "b373cb64.b32288",
        "name": "Set delay 15",
        "func": "flow.set(\"delay\", 15);\n   \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 670,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "e644391d.a8fa88",
        "type": "ui_slider",
        "z": "d9d0239.9656ae",
        "name": "Temp Lamp 1",
        "label": "Color tempratuur Lamp 1",
        "tooltip": "",
        "group": "5b148da4.232e64",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "all",
        "topic": "",
        "min": "150",
        "max": "500",
        "step": 1,
        "x": 160,
        "y": 240,
        "wires": [
            [
                "ffd3810a.f641f"
            ]
        ]
    },
    {
        "id": "9b209961.9049e8",
        "type": "function",
        "z": "d9d0239.9656ae",
        "name": "temp",
        "func": "msg.payload = msg.payload.temp;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1590,
        "y": 240,
        "wires": [
            [
                "31ea1274.7219ae",
                "817b1648.e0a558"
            ]
        ]
    },
    {
        "id": "31ea1274.7219ae",
        "type": "zigbee2mqtt-out",
        "z": "d9d0239.9656ae",
        "name": "",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "color_temp",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1760,
        "y": 240,
        "wires": []
    },
    {
        "id": "817b1648.e0a558",
        "type": "debug",
        "z": "d9d0239.9656ae",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1800,
        "y": 320,
        "wires": []
    },
    {
        "id": "ffd3810a.f641f",
        "type": "function",
        "z": "d9d0239.9656ae",
        "name": "",
        "func": "\nvalue = {};\nvalue.temp = msg.payload;\nvalue.state = \"on\";\n\nmsg.payload = value;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 280,
        "wires": [
            [
                "5e24cb69.f4b594"
            ]
        ]
    },
    {
        "id": "20513b5c.6ec544",
        "type": "zigbee2mqtt-out",
        "z": "d9d0239.9656ae",
        "name": "",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "color_temp",
        "commandType": "z2m_cmd",
        "payload": "cool",
        "payloadType": "str",
        "transition": 0,
        "x": 2160,
        "y": 220,
        "wires": []
    },
    {
        "id": "21286c13.4f7d84",
        "type": "inject",
        "z": "d9d0239.9656ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1970,
        "y": 240,
        "wires": [
            [
                "20513b5c.6ec544"
            ]
        ]
    },
    {
        "id": "180a101a.9cd43",
        "type": "ui_button",
        "z": "5f633a28.607134",
        "name": "IconRefresh",
        "group": "70fb931.dfc146c",
        "order": 1,
        "width": 2,
        "height": 2,
        "passthru": false,
        "label": "",
        "tooltip": "Refresh",
        "color": "",
        "bgcolor": "",
        "icon": "fa-refresh fa-4x",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 990,
        "y": 300,
        "wires": [
            [
                "c5efdf55.db32f"
            ]
        ]
    },
    {
        "id": "9c052db7.3c434",
        "type": "ui_text",
        "z": "5f633a28.607134",
        "group": "70fb931.dfc146c",
        "order": 4,
        "width": 5,
        "height": 1,
        "name": "Description",
        "label": "",
        "format": "{{msg.payload.current.weather[0].description}}",
        "layout": "col-center",
        "x": 990,
        "y": 20,
        "wires": []
    },
    {
        "id": "ec4eb2d0.974c",
        "type": "ui_text",
        "z": "5f633a28.607134",
        "group": "70fb931.dfc146c",
        "order": 9,
        "width": 5,
        "height": 1,
        "name": "Wind",
        "label": "",
        "format": "{{msg.payload.current.wind_speed}}&nbsp;&nbsp;<i class=\"wi wi-darksky-wind\"></i>&nbsp;&nbsp;{{msg.payload.current.wind_cardinal}}",
        "layout": "col-center",
        "x": 970,
        "y": 140,
        "wires": []
    },
    {
        "id": "5b97953.01fdd6c",
        "type": "ui_text",
        "z": "5f633a28.607134",
        "group": "70fb931.dfc146c",
        "order": 11,
        "width": 3,
        "height": 1,
        "name": "SunsetTime",
        "label": "",
        "format": "<i class=\"wi wi-wu-sunny\"></i>&nbsp;<i class=\"fa fa-arrow-down\"></i>&nbsp;&nbsp;{{msg.payload.current.sunset}}",
        "layout": "row-center",
        "x": 990,
        "y": 220,
        "wires": []
    },
    {
        "id": "d284ed2f.c15c8",
        "type": "comment",
        "z": "5f633a28.607134",
        "name": "OpenWeatherMap One Call API for Weather and Forecast",
        "info": "",
        "x": 270,
        "y": 40,
        "wires": []
    },
    {
        "id": "9dbf3c95.67c74",
        "type": "ui_template",
        "z": "5f633a28.607134",
        "group": "70fb931.dfc146c",
        "name": "Forecast2",
        "order": 14,
        "width": 17,
        "height": 2,
        "format": "<div style=\"height: 100%; justify-content: center; align-items: center;\">\n <div layout=\"rowicons\" layout-align=\"space-around start\" ng-repeat=\"data in msg.payload.rowicons\" style=\"font-size:150%;padding-top: 5px;padding-bottom: 5px\">\n  <span flex style=\"color: white;text-align: center\"><i class=\"wi wi-owm-{{data.cell01}}\"></i></span>\n  <span flex style=\"color: white;text-align: center\"><i class=\"wi wi-owm-{{data.cell02}}\"></i></span>\n  <span flex style=\"color: white;text-align: center\"><i class=\"wi wi-owm-{{data.cell03}}\"></i></span>\n  <span flex style=\"color: white;text-align: center\"><i class=\"wi wi-owm-{{data.cell04}}\"></i></span>\n  <span flex style=\"color: white;text-align: center\"><i class=\"wi wi-owm-{{data.cell05}}\"></i></span>\n  <span flex style=\"color: white;text-align: center\"><i class=\"wi wi-owm-{{data.cell06}}\"></i></span>\n  <span flex style=\"color: white;text-align: center\"><i class=\"wi wi-owm-{{data.cell07}}\"></i></span>\n  <span flex style=\"color: white;text-align: center\"><i class=\"wi wi-owm-{{data.cell08}}\"></i></span>\n  <span flex style=\"color: white;text-align: center\"><i class=\"wi wi-owm-{{data.cell09}}\"></i></span>\n  <span flex style=\"color: white;text-align: center\"><i class=\"wi wi-owm-{{data.cell10}}\"></i></span>\n </div>\n <div layout=\"rowtext\" layout-align=\"space-around start\" ng-repeat=\"data in msg.payload.rowtext\" style=\"line-height: 150%\">\n  <span flex style=\"color: white;text-align: center;\">{{data.cell01}}</span>\n  <span flex style=\"color: white;text-align: center\">{{data.cell02}}</span>\n  <span flex style=\"color: white;text-align: center\">{{data.cell03}}</span>\n  <span flex style=\"color: white;text-align: center\">{{data.cell04}}</span>\n  <span flex style=\"color: white;text-align: center\">{{data.cell05}}</span>\n  <span flex style=\"color: white;text-align: center\">{{data.cell06}}</span>\n  <span flex style=\"color: white;text-align: center\">{{data.cell07}}</span>\n  <span flex style=\"color: white;text-align: center\">{{data.cell08}}</span>\n  <span flex style=\"color: white;text-align: center\">{{data.cell09}}</span>\n  <span flex style=\"color: white;text-align: center\">{{data.cell10}}</span>\n  \n </div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 1000,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "d8c5527f.7739",
        "type": "ui_text",
        "z": "5f633a28.607134",
        "group": "70fb931.dfc146c",
        "order": 2,
        "width": 2,
        "height": 1,
        "name": "Temperature",
        "label": "",
        "format": "<p style=\"font-size: 200%\">{{msg.payload.current.temp}}</p>",
        "layout": "row-left",
        "x": 990,
        "y": 60,
        "wires": []
    },
    {
        "id": "681b2b94.9f7a44",
        "type": "http request",
        "z": "5f633a28.607134",
        "name": "Get OWM data",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "https://api.openweathermap.org/data/2.5/onecall",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 480,
        "y": 160,
        "wires": [
            [
                "67075190.fc6f3",
                "51758dd7.02d3f4",
                "9acb69ba.4fa0a8",
                "40f0baad.029164"
            ]
        ]
    },
    {
        "id": "c72d96f0.204148",
        "type": "inject",
        "z": "5f633a28.607134",
        "name": "Trigger",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1800",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 120,
        "y": 100,
        "wires": [
            [
                "79276db2.a2ce14"
            ]
        ]
    },
    {
        "id": "67075190.fc6f3",
        "type": "function",
        "z": "5f633a28.607134",
        "name": "Format current data",
        "func": "var icon = {};\n\nvar units=flow.get('units');\nif (units===undefined)\n{\n  units=\"imperial\";\n}\n\nfunction timeConvert(UNIX_timestamp){\n  var a = new Date(UNIX_timestamp * 1000);\n  var hour = a.getHours();\n  var min = a.getMinutes();\n  if (min < 10) {min = \"0\" + min;}\n  return hour + ':' + min;\n}\n\nvar degreesToCardinal = function(deg){\nif (deg>11.25 && deg<=33.75){\nreturn \"NNE\";\n  }else if (deg>33.75 && deg<56.25){\nreturn \"NE\";\n  }else if (deg>56.25 && deg<78.75){\nreturn \"ENE\";\n  }else if (deg>78.75 && deg<101.25){\nreturn \"E\";\n  }else if (deg>101.25 && deg<123.75){\nreturn \"ESE\";\n  }else if (deg>123.75 && deg<146.25){\nreturn \"SE\";\n  }else if (deg>146.25 && deg<168.75){\nreturn \"SSE\";\n  }else if (deg>168.75 && deg<191.25){\nreturn \"S\";\n  }else if (deg>191.25 && deg<213.75){\nreturn \"SSW\";\n  }else if (deg>213.75 && deg<236.25){\nreturn \"SW\";\n  }else if (deg>236.25 && deg<258.75){\nreturn \"WSW\";\n  }else if (deg>258.75 && deg<281.25){\nreturn \"W\";\n  }else if (deg>281.25 && deg<303.75){\nreturn \"WNW\";\n  }else if (deg>303.75 && deg<326.25){\nreturn \"NW\";\n  }else if (deg>326.25 && deg<348.75){\nreturn \"NNW\";\n  }else{\nreturn \"N\"; \n  }\n}\n\nif (units == \"imperial\")\n{\n  msg.payload.current.temp = msg.payload.current.temp.toFixed() + ' F';\n  msg.payload.current.wind_speed = msg.payload.current.wind_speed.toFixed() + ' mph';\n}\nelse // metric units\n{\n  msg.payload.current.temp = msg.payload.current.temp.toFixed(1) + ' C';\n  msg.payload.current.feels_like = msg.payload.current.feels_like.toFixed(1) + ' C';\n  msg.payload.current.wind_speed = msg.payload.current.wind_speed.toFixed(1) + ' m/s';\n}\n\nmsg.payload.current.wind_cardinal = degreesToCardinal(msg.payload.current.wind_deg);\nmsg.payload.current.sunrise = timeConvert(msg.payload.current.sunrise);\nmsg.payload.current.sunset = timeConvert(msg.payload.current.sunset);\n\nvar iconString = 'wi-owm-' + msg.payload.current.weather[0].icon + ' wi-4x';\nicon = {\n    ui_control: {\n        icon: iconString\n    }\n}; \n\nreturn [msg, icon];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 720,
        "y": 160,
        "wires": [
            [
                "d8c5527f.7739",
                "ec4eb2d0.974c",
                "9c052db7.3c434",
                "5b97953.01fdd6c",
                "822589a6.88da48",
                "e3e57b8.40cf188",
                "40f44662.3ecde8"
            ],
            [
                "180a101a.9cd43"
            ]
        ]
    },
    {
        "id": "79276db2.a2ce14",
        "type": "change",
        "z": "5f633a28.607134",
        "name": "Set location, appid, units",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "payload.lat",
                "pt": "msg",
                "to": "53.179832",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.lon",
                "pt": "msg",
                "to": "6.168301",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.appid",
                "pt": "msg",
                "to": "89dfdcc42cecd7eaaf1d2addba5c2ff5",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.units",
                "pt": "msg",
                "to": "metric",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "units",
                "pt": "flow",
                "to": "payload.units",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.lang",
                "pt": "msg",
                "to": "NL",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 100,
        "wires": [
            [
                "681b2b94.9f7a44"
            ]
        ]
    },
    {
        "id": "16181411.5a365c",
        "type": "ui_ui_control",
        "z": "5f633a28.607134",
        "name": "Update tab",
        "events": "all",
        "x": 110,
        "y": 200,
        "wires": [
            [
                "3f3d5ab9.82b3a6"
            ]
        ]
    },
    {
        "id": "c5efdf55.db32f",
        "type": "link out",
        "z": "5f633a28.607134",
        "name": "Refresh",
        "links": [
            "a6b24cea.e52a7"
        ],
        "x": 1115,
        "y": 300,
        "wires": []
    },
    {
        "id": "a6b24cea.e52a7",
        "type": "link in",
        "z": "5f633a28.607134",
        "name": "",
        "links": [
            "c5efdf55.db32f"
        ],
        "x": 155,
        "y": 140,
        "wires": [
            [
                "79276db2.a2ce14"
            ]
        ]
    },
    {
        "id": "3f3d5ab9.82b3a6",
        "type": "switch",
        "z": "5f633a28.607134",
        "name": "tab focus",
        "property": "tab",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 280,
        "y": 200,
        "wires": [
            [
                "79276db2.a2ce14"
            ]
        ]
    },
    {
        "id": "822589a6.88da48",
        "type": "ui_text",
        "z": "5f633a28.607134",
        "group": "70fb931.dfc146c",
        "order": 7,
        "width": 2,
        "height": 1,
        "name": "Gevoelstemperatuur",
        "label": "",
        "format": "<p style=\"font-size: 200%\">{{msg.payload.current.feels_like}}</p>",
        "layout": "row-left",
        "x": 1020,
        "y": 100,
        "wires": []
    },
    {
        "id": "f2c32b90.15e2f8",
        "type": "ui_template",
        "z": "5f633a28.607134",
        "group": "70fb931.dfc146c",
        "name": "Forecast3",
        "order": 15,
        "width": 17,
        "height": 2,
        "format": "<div style=\"height: 100%; justify-content: center; align-items: center;\">\n <div layout=\"rowicons\" layout-align=\"space-around start\" ng-repeat=\"data in msg.payload.rowicons\" style=\"font-size:150%;padding-top: 5px;padding-bottom: 5px\">\n  <span flex style=\"color: #30b6bd;text-align: center\"><i class=\"wi wi-owm-{{data.cell01}}\"></i></span>\n  <span flex style=\"color: #30b6bd;text-align: center\"><i class=\"wi wi-owm-{{data.cell02}}\"></i></span>\n  <span flex style=\"color: #30b6bd;text-align: center\"><i class=\"wi wi-owm-{{data.cell03}}\"></i></span>\n  <span flex style=\"color: #30b6bd;text-align: center\"><i class=\"wi wi-owm-{{data.cell04}}\"></i></span>\n  <span flex style=\"color: #30b6bd;text-align: center\"><i class=\"wi wi-owm-{{data.cell05}}\"></i></span>\n  <span flex style=\"color: #30b6bd;text-align: center\"><i class=\"wi wi-owm-{{data.cell06}}\"></i></span>\n  <span flex style=\"color: #30b6bd;text-align: center\"><i class=\"wi wi-owm-{{data.cell07}}\"></i></span>\n </div>\n <div layout=\"rowtext\" layout-align=\"space-around start\" ng-repeat=\"data in msg.payload.rowtext\" style=\"line-height: 150%\">\n  <span flex style=\"color: #30b6bd;text-align: center;\">{{data.cell01}}</span>\n  <span flex style=\"color: #30b6bd;text-align: center\">{{data.cell02}}</span>\n  <span flex style=\"color: #30b6bd;text-align: center\">{{data.cell03}}</span>\n  <span flex style=\"color: #30b6bd;text-align: center\">{{data.cell04}}</span>\n  <span flex style=\"color: #30b6bd;text-align: center\">{{data.cell05}}</span>\n  <span flex style=\"color: #30b6bd;text-align: center\">{{data.cell06}}</span>\n  <span flex style=\"color: #30b6bd;text-align: center\">{{data.cell07}}</span>\n </div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 1000,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "9acb69ba.4fa0a8",
        "type": "function",
        "z": "5f633a28.607134",
        "name": "Format forecast data daily",
        "func": "var fcdata = {};\nvar units=flow.get('units');\nif (units===undefined)\n{\n  units=\"imperial\";\n}\n\nfunction formatTemp(high, low){\n    if (units == \"imperial\") {\n        if (low){\n          temp = parseFloat(high).toFixed() + '/' + parseFloat(low).toFixed()\n        }\n        else {\n          temp = parseFloat(high).toFixed() + 'F'\n        }\n    }\n    else { // metric\n//        temp = parseFloat(temp).toFixed(1) + 'C'\n        if (low){\n          temp = parseFloat(high).toFixed() + '/' + parseFloat(low).toFixed()\n        }\n        else {\n          temp = parseFloat(high).toFixed() + 'C'\n        }\n    }\n    return temp;\n}\nfunction dayName(unixTime){\n    var d = new Date(unixTime * 1000);\n    var weekday = new Array(7);\n        weekday[0] = \"Zon\";\n        weekday[1] = \"Maa\";\n        weekday[2] = \"din\";\n        weekday[3] = \"Woe\";\n        weekday[4] = \"Don\";\n        weekday[5] = \"Vri\";\n        weekday[6] = \"Zat\";\n\n    return weekday[d.getDay()]\n}\nfunction timeConvert(UNIX_timestamp){\n  var a = new Date(UNIX_timestamp * 1000);\n  var hour = a.getHours();\n  var suffix = \":00\";\n  //var suffix = \" am\";\n  //if (hour >= 12) {\n//    hour = hour - 12;\n  //  suffix = \" pm\";\n  //}\n  //if (hour === 0) {\n//    hour = 12;\n  //}\n  var min = a.getMinutes();\n  if (min < 10) {min = \"0\" + min;}\n//  return hour + ':' + min + suffix;\n  return hour + suffix;\n}\n// prepare forecast data for CSS based ui widget\n\nfcdata.payload = {\n  rowtext: {\n  \tdata01: {\n      cell01: dayName(msg.payload.daily[1].dt),\n      cell02: dayName(msg.payload.daily[2].dt),\n      cell03: dayName(msg.payload.daily[3].dt),\n      cell04: dayName(msg.payload.daily[4].dt),\n      cell05: dayName(msg.payload.daily[5].dt),\n      cell06: dayName(msg.payload.daily[6].dt),\n      cell07: dayName(msg.payload.daily[7].dt)\n  \t},\n  \tdata02: {\n       cell01: formatTemp(msg.payload.daily[1].temp.max, msg.payload.daily[1].temp.min),\n       cell02: formatTemp(msg.payload.daily[2].temp.max, msg.payload.daily[2].temp.min),\n       cell03: formatTemp(msg.payload.daily[3].temp.max, msg.payload.daily[3].temp.min),\n       cell04: formatTemp(msg.payload.daily[4].temp.max, msg.payload.daily[4].temp.min),\n       cell05: formatTemp(msg.payload.daily[5].temp.max, msg.payload.daily[5].temp.min),\n       cell06: formatTemp(msg.payload.daily[6].temp.max, msg.payload.daily[6].temp.min),\n       cell07: formatTemp(msg.payload.daily[7].temp.max, msg.payload.daily[7].temp.min)\n  \t}\n  },\n  rowicons: {\n  \tdata01: {\n  \t\tcell01: msg.payload.daily[1].weather[0].icon,\n  \t\tcell02: msg.payload.daily[2].weather[0].icon,\n  \t\tcell03: msg.payload.daily[3].weather[0].icon,\n  \t\tcell04: msg.payload.daily[4].weather[0].icon,\n  \t\tcell05: msg.payload.daily[5].weather[0].icon,\n  \t\tcell06: msg.payload.daily[6].weather[0].icon,\n  \t\tcell07: msg.payload.daily[7].weather[0].icon,\n  \t},\n  }\n}\n\nreturn fcdata;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 790,
        "y": 540,
        "wires": [
            [
                "f2c32b90.15e2f8"
            ]
        ]
    },
    {
        "id": "51758dd7.02d3f4",
        "type": "function",
        "z": "5f633a28.607134",
        "name": "Format forecast data hourly",
        "func": "var fcdata = {};\nvar units=flow.get('units');\nif (units===undefined)\n{\n  units=\"imperial\";\n}\n\nfunction formatTemp(high, low){\n    if (units == \"imperial\") {\n        if (low){\n          temp = parseFloat(high).toFixed() + '/' + parseFloat(low).toFixed()\n        }\n        else {\n          temp = parseFloat(high).toFixed() + 'F'\n        }\n    }\n    else { // metric\n//        temp = parseFloat(temp).toFixed(1) + 'C'\n        if (low){\n          temp = parseFloat(high).toFixed() + '/' + parseFloat(low).toFixed()\n        }\n        else {\n          temp = parseFloat(high).toFixed() + 'C'\n        }\n    }\n    return temp;\n}\nfunction dayName(unixTime){\n    var d = new Date(unixTime * 1000);\n    var weekday = new Array(7);\n        weekday[0] = \"Zon\";\n        weekday[1] = \"Maa\";\n        weekday[2] = \"din\";\n        weekday[3] = \"Woe\";\n        weekday[4] = \"Don\";\n        weekday[5] = \"Vri\";\n        weekday[6] = \"Zat\";\n\n    return weekday[d.getDay()]\n}\nfunction timeConvert(UNIX_timestamp){\n  var a = new Date(UNIX_timestamp * 1000);\n  var hour = a.getHours();\n  var suffix = \":00\";\n  //var suffix = \" am\";\n  //if (hour >= 12) {\n//    hour = hour - 12;\n  //  suffix = \" pm\";\n  //}\n  //if (hour === 0) {\n//    hour = 12;\n  //}\n  var min = a.getMinutes();\n  if (min < 10) {min = \"0\" + min;}\n//  return hour + ':' + min + suffix;\n  return hour + suffix;\n}\n// prepare forecast data for CSS based ui widget\n\nfcdata.payload = {\n  rowtext: {\n  \tdata01: {\n      cell01: timeConvert(msg.payload.hourly[1].dt),\n      cell02: timeConvert(msg.payload.hourly[2].dt),\n      cell03: timeConvert(msg.payload.hourly[3].dt),\n      cell04: timeConvert(msg.payload.hourly[4].dt),\n      cell05: timeConvert(msg.payload.hourly[5].dt),\n      cell06: timeConvert(msg.payload.hourly[6].dt),\n      cell07: timeConvert(msg.payload.hourly[7].dt),\n      cell08: timeConvert(msg.payload.hourly[8].dt),\n      cell09: timeConvert(msg.payload.hourly[9].dt),\n      cell10: timeConvert(msg.payload.hourly[10].dt),\n  \t},\n  \tdata02: {\n       cell01: formatTemp(msg.payload.hourly[1].temp),\n       cell02: formatTemp(msg.payload.hourly[2].temp),\n       cell03: formatTemp(msg.payload.hourly[3].temp),\n       cell04: formatTemp(msg.payload.hourly[4].temp),\n       cell05: formatTemp(msg.payload.hourly[5].temp),\n       cell06: formatTemp(msg.payload.hourly[6].temp),\n       cell07: formatTemp(msg.payload.hourly[7].temp),\n       cell08: formatTemp(msg.payload.hourly[8].temp),\n       cell09: formatTemp(msg.payload.hourly[9].temp),\n       cell10: formatTemp(msg.payload.hourly[10].temp),\n       //cell07: formatTemp(msg.payload.daily[1].temp.max, msg.payload.daily[0].temp.min),\n  \t}\n  },\n  rowicons: {\n  \tdata01: {\n  \t\tcell01: msg.payload.hourly[1].weather[0].icon,\n  \t\tcell02: msg.payload.hourly[2].weather[0].icon,\n  \t\tcell03: msg.payload.hourly[3].weather[0].icon,\n  \t\tcell04: msg.payload.hourly[4].weather[0].icon,\n  \t\tcell05: msg.payload.hourly[5].weather[0].icon,\n  \t\tcell06: msg.payload.hourly[6].weather[0].icon,\n  \t\tcell07: msg.payload.hourly[7].weather[0].icon,\n  \t\tcell08: msg.payload.hourly[8].weather[0].icon,\n  \t\tcell09: msg.payload.hourly[9].weather[0].icon,\n  \t\tcell10: msg.payload.hourly[10].weather[0].icon,\n  \t},\n  }\n}\n\nreturn fcdata;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 800,
        "y": 480,
        "wires": [
            [
                "9dbf3c95.67c74"
            ]
        ]
    },
    {
        "id": "e3e57b8.40cf188",
        "type": "ui_text",
        "z": "5f633a28.607134",
        "group": "70fb931.dfc146c",
        "order": 13,
        "width": 3,
        "height": 1,
        "name": "Sunuv",
        "label": "",
        "format": "<i class=\"wi wi-wu-sunny\"></i>&nbsp;UV&nbsp;&nbsp;{{msg.payload.current.uvi}}",
        "layout": "row-center",
        "x": 970,
        "y": 260,
        "wires": []
    },
    {
        "id": "3919a68.646905a",
        "type": "ui_button",
        "z": "d1076ec5.efc15",
        "name": "MenuWeer",
        "group": "70fb931.dfc146c",
        "order": 16,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "fa-bars",
        "payload": "button_clicked",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 390,
        "y": 140,
        "wires": [
            [
                "390e8dd7.f711e2"
            ]
        ]
    },
    {
        "id": "390e8dd7.f711e2",
        "type": "change",
        "z": "d1076ec5.efc15",
        "name": "Get X and Y from bbox",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-9",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+18",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 140,
        "wires": [
            [
                "1823ca46.615d96"
            ]
        ]
    },
    {
        "id": "1823ca46.615d96",
        "type": "ui_context_menu",
        "z": "d1076ec5.efc15",
        "group": "70fb931.dfc146c",
        "order": 18,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "Weer",
                "icon": "fa-thermometer-4",
                "label": "Weer",
                "topic": "Weer",
                "payload": "0",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "Verlichting",
                "icon": "fa-lightbulb-o",
                "label": "Verlichting",
                "topic": "Verlichting",
                "payload": "1",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "Zigbee",
                "icon": "fa-wifi",
                "label": "Zigbee",
                "topic": "Zigbee",
                "payload": "2",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "native",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "",
        "x": 900,
        "y": 140,
        "wires": [
            [
                "1c3f7e7b.081372"
            ]
        ]
    },
    {
        "id": "1c3f7e7b.081372",
        "type": "ui_ui_control",
        "z": "d1076ec5.efc15",
        "name": "",
        "events": "change",
        "x": 1100,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "9e84c9a.4021338",
        "type": "ui_button",
        "z": "d1076ec5.efc15",
        "name": "MenuVerlichting",
        "group": "2908388b.8114b8",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "fa-bars",
        "payload": "button_clicked",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 400,
        "y": 200,
        "wires": [
            [
                "cecbc62c.70d008",
                "c1c8dbe2.b16fb8"
            ]
        ]
    },
    {
        "id": "cecbc62c.70d008",
        "type": "change",
        "z": "d1076ec5.efc15",
        "name": "Get X and Y from bbox",
        "rules": [
            {
                "t": "set",
                "p": "position.x",
                "pt": "msg",
                "to": "event.bbox[2]-9",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "position.y",
                "pt": "msg",
                "to": "event.bbox[3]+18",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 200,
        "wires": [
            [
                "6e375306.5907ac"
            ]
        ]
    },
    {
        "id": "ad53bfb8.175",
        "type": "ui_svg_graphics",
        "z": "9a1a2b9e.d6da98",
        "group": "2908388b.8114b8",
        "order": 1,
        "width": 16,
        "height": 9,
        "svgString": "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" preserveAspectRatio=\"none\" x=\"0\" y=\"0\" viewBox=\"0 -0.05780346691608429 900 710.1156005859375\" width=\"100%\" height=\"100%\">\n    <image  id=\"background\" width=\"900\" height=\"500\" xlink:href=\"http://192.168.2.118/schuur.jpg\" />\n</svg>",
        "clickableShapes": [],
        "javascriptHandlers": [],
        "smilAnimations": [],
        "bindings": [
            {
                "selector": "#banner",
                "bindSource": "payload.title",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#camera_living",
                "bindSource": "payload.position.x",
                "bindType": "attr",
                "attribute": "x"
            },
            {
                "selector": "#camera_living",
                "bindSource": "payload.camera.colour",
                "bindType": "attr",
                "attribute": "fill"
            }
        ],
        "showCoordinates": false,
        "autoFormatAfterEdit": false,
        "showBrowserErrors": false,
        "showBrowserEvents": false,
        "enableJsDebugging": false,
        "sendMsgWhenLoaded": false,
        "outputField": "my_output_field",
        "editorUrl": "http://drawsvg.org/drawsvg.html",
        "directory": "",
        "panning": "disabled",
        "zooming": "disabled",
        "panOnlyWhenZoomed": false,
        "doubleClickZoomEnabled": false,
        "mouseWheelZoomEnabled": false,
        "dblClickZoomPercentage": "150",
        "name": "",
        "x": 480,
        "y": 240,
        "wires": [
            [
                "44cb5c0d.3b6594"
            ]
        ]
    },
    {
        "id": "cc4e3ea5.879ef",
        "type": "change",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"command\":\"add_element\",\"elementType\":\"text\",\"elementId\":\"light_bulb_4\",\"elementAttributes\":{\"font-family\":\"FontAwesome\",\"font-size\":\"30\",\"text-anchor\":\"middle\",\"alignment-baseline\":\"middle\",\"stroke-width\":\"1\"},\"elementStyleAttributes\":{\"fill\":\"blue\",\"stroke\":\"blue\"}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 400,
        "wires": [
            [
                "a511e277.62b91"
            ]
        ]
    },
    {
        "id": "a511e277.62b91",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "func": "msg.payload.elementAttributes.x = msg.x;\nmsg.payload.elementAttributes.y = msg.y;\nmsg.payload.elementId = msg.elementId;\nif (msg.textContent == null) {\n    msg.payload.textContent = \"fa-lightbulb-o\";\n}   else {\n    msg.payload.textContent = msg.textContent;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1020,
        "y": 400,
        "wires": [
            [
                "9ada2919.0380a8"
            ]
        ]
    },
    {
        "id": "4804d5a1.73b2ac",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "LampGang",
        "func": "msg.x = 300;\nmsg.y = 370;\nmsg.elementId = node.name;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 570,
        "y": 520,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "e7d1f8b1.b93f18",
        "type": "change",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"command\":\"add_event\",\"event\":\"click\",\"payload\":\"light_icon_clicked\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 460,
        "wires": [
            [
                "a4346023.a5127"
            ]
        ]
    },
    {
        "id": "a4346023.a5127",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "func": "msg.payload.selector = \"#\" + msg.elementId;\nmsg.payload.topic = msg.elementId;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1020,
        "y": 460,
        "wires": [
            [
                "9ada2919.0380a8"
            ]
        ]
    },
    {
        "id": "7f56bdf1.a30ce4",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "Set on/off",
        "func": "var status = msg.payload;\nvar style = {};\nmsg.payload = {};\nif (status == \"on\") {\n    style.fill = \"yellow\";\n    style.stroke = \"yellow\";\n} else {\n    style.fill = \"black\";\n    style.stroke = \"black\";\n}\nmsg.payload.style = style;\nmsg.payload.command = \"update_style\";\nmsg.payload.selector = msg.sourceMsg.selector;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 940,
        "y": 260,
        "wires": [
            [
                "23c36be4.873e84",
                "3cdcd8ac.765068"
            ]
        ]
    },
    {
        "id": "30fdbd95.bd1622",
        "type": "link out",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "f5f81948.120c38"
        ],
        "x": 1295,
        "y": 260,
        "wires": []
    },
    {
        "id": "f5f81948.120c38",
        "type": "link in",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "9ada2919.0380a8",
            "30fdbd95.bd1622"
        ],
        "x": 355,
        "y": 240,
        "wires": [
            [
                "ad53bfb8.175"
            ]
        ]
    },
    {
        "id": "9ada2919.0380a8",
        "type": "link out",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "f5f81948.120c38"
        ],
        "x": 1195,
        "y": 420,
        "wires": []
    },
    {
        "id": "2a35e4.f0c19a1c",
        "type": "link in",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "c71e492a.e43bb8"
        ],
        "x": 675,
        "y": 420,
        "wires": [
            [
                "cc4e3ea5.879ef",
                "e7d1f8b1.b93f18"
            ]
        ]
    },
    {
        "id": "c71e492a.e43bb8",
        "type": "link out",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "2a35e4.f0c19a1c"
        ],
        "x": 855,
        "y": 760,
        "wires": []
    },
    {
        "id": "ad45325.afcbcd",
        "type": "ui_ui_control",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "events": "change",
        "x": 110,
        "y": 520,
        "wires": [
            [
                "4804d5a1.73b2ac",
                "faac28b4.85c198",
                "2c0ba08c.22389",
                "3e378834.612a08",
                "b6161f32.c51ac",
                "3795d51a.f0a44a",
                "1b7674c3.40f40b",
                "75bb1174.f53c8",
                "b7699e2c.9de33",
                "814eb611.b3dc38"
            ]
        ]
    },
    {
        "id": "5bfb85d0.d96ebc",
        "type": "counter",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "1",
        "upper": "5",
        "mode": "increment",
        "outputs": 2,
        "x": 360,
        "y": 880,
        "wires": [
            [
                "f2acc63e.31f4b8",
                "127d91b1.16232e",
                "dcb86034.a3e7d",
                "beb78d1c.c3b43"
            ],
            []
        ]
    },
    {
        "id": "f2acc63e.31f4b8",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "5",
                "vt": "num"
            },
            {
                "t": "lt",
                "v": "3",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 960,
        "wires": [
            [
                "5bfb85d0.d96ebc"
            ],
            [
                "2b08413f.bbf23e",
                "36bd3cce.49afa4"
            ]
        ]
    },
    {
        "id": "127d91b1.16232e",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "LampA",
        "func": "msg.x = 430;\nmsg.y = 90 + ((msg.payload - 1) * 80);\nmsg.elementId = node.name + msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 540,
        "y": 871,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "faac28b4.85c198",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "func": "\nmsg.reset = 1;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 180,
        "y": 880,
        "wires": [
            [
                "5bfb85d0.d96ebc"
            ]
        ]
    },
    {
        "id": "dcb86034.a3e7d",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "LampC",
        "func": "msg.x = 830;\nmsg.y = 90 + ((msg.payload - 1) * 80);\nmsg.elementId = node.name + msg.payload;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 540,
        "y": 960,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "beb78d1c.c3b43",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "LampB",
        "func": "msg.x = 470 + ((msg.payload - 1) * 80);\nmsg.y = 60;\nmsg.elementId = node.name + msg.payload;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 540,
        "y": 913,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "2c0ba08c.22389",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "LampKeuken1",
        "func": "msg.x = 240;\nmsg.y = 150;\nmsg.elementId = node.name;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 580,
        "y": 560,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "3e378834.612a08",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "LampKeuken2",
        "func": "msg.x = 340;\nmsg.y = 150;\nmsg.elementId = node.name;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 580,
        "y": 600,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "2b08413f.bbf23e",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "LampHalA",
        "func": "msg.x = 70 + ((msg.payload - 1) * 80);\nmsg.y = 350;\nmsg.elementId = node.name + msg.payload;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 550,
        "y": 1020,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "36bd3cce.49afa4",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "LampHalB",
        "func": "msg.x = 70 + ((msg.payload - 1) * 80);\nmsg.y = 450;\nmsg.elementId = node.name + \"H\"+ msg.payload;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 550,
        "y": 1080,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "b6161f32.c51ac",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "GroupA",
        "func": "msg.x = 470;\nmsg.y = 240 ;\nmsg.elementId = node.name;\nmsg.textContent = \"fa-clone\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 560,
        "y": 640,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "3795d51a.f0a44a",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "GroupB",
        "func": "msg.x = 630;\nmsg.y = 100;\nmsg.elementId = node.name;\nmsg.textContent = \"fa-clone\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 560,
        "y": 680,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "1b7674c3.40f40b",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "GroupC",
        "func": "msg.x = 790;\nmsg.y = 240;\nmsg.elementId = node.name;\nmsg.textContent = \"fa-clone\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 560,
        "y": 720,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "75bb1174.f53c8",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "GroupKeuken",
        "func": "msg.x = 290;\nmsg.y = 150;\nmsg.elementId = node.name;\nmsg.textContent = \"fa-clone\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 580,
        "y": 760,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "b7699e2c.9de33",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "GroupHal",
        "func": "msg.x = 110;\nmsg.y = 400;\nmsg.elementId = node.name;\nmsg.textContent = \"fa-clone\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 560,
        "y": 800,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "940df28d.c969f",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "Group A",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "#LampA1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampA2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampA3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampA4",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampA5",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#GroupA",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#All",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 7,
        "x": 1640,
        "y": 120,
        "wires": [
            [
                "1dea3d6.092a2c3"
            ],
            [
                "5c1042ce.1df7dc"
            ],
            [
                "30bb9b52.f979b4"
            ],
            [
                "b7fab3b6.eabe3"
            ],
            [
                "5ca1e1b8.6473d"
            ],
            [
                "1dea3d6.092a2c3",
                "5c1042ce.1df7dc",
                "30bb9b52.f979b4",
                "b7fab3b6.eabe3",
                "5ca1e1b8.6473d"
            ],
            [
                "1dea3d6.092a2c3",
                "5c1042ce.1df7dc",
                "30bb9b52.f979b4",
                "b7fab3b6.eabe3",
                "5ca1e1b8.6473d"
            ]
        ]
    },
    {
        "id": "23c36be4.873e84",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "Set topic",
        "func": "msg.topic = msg.sourceMsg.selector;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1180,
        "y": 260,
        "wires": [
            [
                "30fdbd95.bd1622"
            ]
        ]
    },
    {
        "id": "3cdcd8ac.765068",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "state",
        "func": "\nvar msg1 = {};\nmsg1.topic = msg.sourceMsg.selector\nmsg1.payload = msg.menuId;\nreturn msg1;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1170,
        "y": 180,
        "wires": [
            [
                "75c5ec85.6dc494"
            ]
        ]
    },
    {
        "id": "5c1042ce.1df7dc",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp A2",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 100,
        "wires": []
    },
    {
        "id": "30bb9b52.f979b4",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp A3",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 140,
        "wires": []
    },
    {
        "id": "b7fab3b6.eabe3",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp A4",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 180,
        "wires": []
    },
    {
        "id": "5ca1e1b8.6473d",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp A5",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 220,
        "wires": []
    },
    {
        "id": "1dea3d6.092a2c3",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp A1",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 60,
        "wires": []
    },
    {
        "id": "814eb611.b3dc38",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "Alles",
        "func": "msg.x = 630;\nmsg.y = 220;\nmsg.elementId = node.name;\nmsg.textContent = \"fa-clone\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 550,
        "y": 480,
        "wires": [
            [
                "c71e492a.e43bb8"
            ]
        ]
    },
    {
        "id": "6e375306.5907ac",
        "type": "ui_context_menu",
        "z": "d1076ec5.efc15",
        "group": "2908388b.8114b8",
        "order": 18,
        "width": 0,
        "height": 0,
        "fontSize": 16,
        "inputPositionXField": "position.x",
        "inputPositionXType": "msg",
        "inputPositionYField": "position.y",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "Weer",
                "icon": "fa-thermometer-4",
                "label": "Weer",
                "topic": "Weer",
                "payload": "0",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "Verlichting",
                "icon": "fa-lightbulb-o",
                "label": "Verlichting",
                "topic": "Verlichting",
                "payload": "1",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "Zigbee",
                "icon": "fa-wifi",
                "label": "Zigbee",
                "topic": "Zigbee",
                "payload": "2",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "native",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "",
        "x": 900,
        "y": 200,
        "wires": [
            [
                "1c3f7e7b.081372"
            ]
        ]
    },
    {
        "id": "75c5ec85.6dc494",
        "type": "link out",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "c1835942.bb4b38",
            "638d06a4.165c18",
            "9d128e4a.5a16a",
            "13dc619e.b721de",
            "9a4863f0.7800a",
            "30d87a96.92e3e6"
        ],
        "x": 1295,
        "y": 180,
        "wires": []
    },
    {
        "id": "c1835942.bb4b38",
        "type": "link in",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "75c5ec85.6dc494",
            "7e8714fa.6cf4ac",
            "68fe2998.c8cfd8",
            "8924d62e.54e368",
            "be52903e.9bfb5"
        ],
        "x": 1495,
        "y": 120,
        "wires": [
            [
                "940df28d.c969f"
            ]
        ]
    },
    {
        "id": "6449c73d.c71fb8",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "Group B",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "#LampB1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampB2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampB3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampB4",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampB5",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#GroupB",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#All",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 7,
        "x": 1640,
        "y": 340,
        "wires": [
            [
                "ba4f5c0c.46f69"
            ],
            [
                "84120fb1.6e159"
            ],
            [
                "8240b2cb.f9ed5"
            ],
            [
                "39d556b9.7766da"
            ],
            [
                "de2b80bb.856c1"
            ],
            [
                "ba4f5c0c.46f69",
                "84120fb1.6e159",
                "8240b2cb.f9ed5",
                "39d556b9.7766da",
                "de2b80bb.856c1"
            ],
            [
                "ba4f5c0c.46f69",
                "84120fb1.6e159",
                "8240b2cb.f9ed5",
                "39d556b9.7766da",
                "de2b80bb.856c1"
            ]
        ]
    },
    {
        "id": "638d06a4.165c18",
        "type": "link in",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "75c5ec85.6dc494",
            "7e8714fa.6cf4ac",
            "68fe2998.c8cfd8",
            "8924d62e.54e368",
            "be52903e.9bfb5"
        ],
        "x": 1495,
        "y": 340,
        "wires": [
            [
                "6449c73d.c71fb8"
            ]
        ]
    },
    {
        "id": "ba4f5c0c.46f69",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp B1",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 260,
        "wires": []
    },
    {
        "id": "39d556b9.7766da",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp B4",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 380,
        "wires": []
    },
    {
        "id": "de2b80bb.856c1",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp B5",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 420,
        "wires": []
    },
    {
        "id": "8240b2cb.f9ed5",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp B3",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 340,
        "wires": []
    },
    {
        "id": "84120fb1.6e159",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp B2",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 300,
        "wires": []
    },
    {
        "id": "d4c3a7a5.4d6ff8",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp C1",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 480,
        "wires": []
    },
    {
        "id": "b0aecb8.abcf038",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp C4",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 600,
        "wires": []
    },
    {
        "id": "62e5f17a.f6c52",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp C5",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 640,
        "wires": []
    },
    {
        "id": "ffde6cd.15a1e9",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp C3",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 560,
        "wires": []
    },
    {
        "id": "9f54c9e4.fa7ce8",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp C2",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 2",
        "device_id": "0x588e81fffef09fd0",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 520,
        "wires": []
    },
    {
        "id": "9ffd85f0.f0f758",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "Group C",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "#LampC1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampC2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampC3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampC4",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampC5",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#GroupC",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#All",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 7,
        "x": 1640,
        "y": 540,
        "wires": [
            [
                "d4c3a7a5.4d6ff8"
            ],
            [
                "9f54c9e4.fa7ce8"
            ],
            [
                "ffde6cd.15a1e9"
            ],
            [
                "b0aecb8.abcf038"
            ],
            [
                "62e5f17a.f6c52"
            ],
            [
                "d4c3a7a5.4d6ff8",
                "9f54c9e4.fa7ce8",
                "ffde6cd.15a1e9",
                "b0aecb8.abcf038",
                "62e5f17a.f6c52"
            ],
            [
                "d4c3a7a5.4d6ff8",
                "9f54c9e4.fa7ce8",
                "ffde6cd.15a1e9",
                "b0aecb8.abcf038",
                "62e5f17a.f6c52"
            ]
        ]
    },
    {
        "id": "9d128e4a.5a16a",
        "type": "link in",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "75c5ec85.6dc494",
            "7e8714fa.6cf4ac",
            "68fe2998.c8cfd8",
            "8924d62e.54e368",
            "be52903e.9bfb5"
        ],
        "x": 1495,
        "y": 540,
        "wires": [
            [
                "9ffd85f0.f0f758"
            ]
        ]
    },
    {
        "id": "7d78fed6.1aed3",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "Group Keuken",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "#LampKeuken1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampKeuken2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#GroupKeuken",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#All",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1660,
        "y": 720,
        "wires": [
            [
                "b87bfe7a.d141"
            ],
            [
                "b166c6eb.a186e8"
            ],
            [
                "b87bfe7a.d141",
                "b166c6eb.a186e8"
            ],
            [
                "b87bfe7a.d141",
                "b166c6eb.a186e8"
            ]
        ]
    },
    {
        "id": "13dc619e.b721de",
        "type": "link in",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "75c5ec85.6dc494",
            "7e8714fa.6cf4ac",
            "68fe2998.c8cfd8",
            "8924d62e.54e368",
            "be52903e.9bfb5"
        ],
        "x": 1495,
        "y": 720,
        "wires": [
            [
                "7d78fed6.1aed3"
            ]
        ]
    },
    {
        "id": "49645217.d6993c",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "Group Hal",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "#LampHalA1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampHalA2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampHalB1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#LampHalB2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#GroupHal",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 1650,
        "y": 820,
        "wires": [
            [
                "7cb42c01.9901d4"
            ],
            [
                "58705d06.02af44"
            ],
            [
                "15781976.2a71d7"
            ],
            [
                "179b26b6.0eed59"
            ],
            [
                "7cb42c01.9901d4",
                "58705d06.02af44",
                "15781976.2a71d7",
                "179b26b6.0eed59"
            ]
        ]
    },
    {
        "id": "9a4863f0.7800a",
        "type": "link in",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "75c5ec85.6dc494",
            "7e8714fa.6cf4ac",
            "68fe2998.c8cfd8",
            "8924d62e.54e368",
            "be52903e.9bfb5"
        ],
        "x": 1495,
        "y": 820,
        "wires": [
            [
                "49645217.d6993c"
            ]
        ]
    },
    {
        "id": "bc8ef612.550018",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "server": "54720da2.31fe84",
        "friendly_name": "Oprit",
        "device_id": "0x7cb03eaa0a079953",
        "command": "color_rgb",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1930,
        "y": 1060,
        "wires": []
    },
    {
        "id": "9b2de03c.d52b7",
        "type": "light-scheduler",
        "z": "9a1a2b9e.d6da98",
        "settings": "e0dd3b52.9b32b8",
        "events": "[{\"start\":{\"dow\":2,\"mod\":450},\"end\":{\"dow\":2,\"mod\":570}},{\"start\":{\"dow\":1,\"mod\":450},\"end\":{\"dow\":1,\"mod\":570}},{\"start\":{\"dow\":3,\"mod\":450},\"end\":{\"dow\":3,\"mod\":570}},{\"start\":{\"dow\":4,\"mod\":450},\"end\":{\"dow\":4,\"mod\":570}},{\"start\":{\"dow\":5,\"mod\":450},\"end\":{\"dow\":5,\"mod\":570}},{\"start\":{\"dow\":6,\"mod\":480},\"end\":{\"dow\":6,\"mod\":570}},{\"start\":{\"dow\":0,\"mod\":480},\"end\":{\"dow\":0,\"mod\":570}},{\"start\":{\"dow\":1,\"mod\":915},\"end\":{\"dow\":1,\"mod\":1320}},{\"start\":{\"dow\":2,\"mod\":915},\"end\":{\"dow\":2,\"mod\":1320}},{\"start\":{\"dow\":3,\"mod\":915},\"end\":{\"dow\":3,\"mod\":1320}},{\"start\":{\"dow\":4,\"mod\":915},\"end\":{\"dow\":4,\"mod\":1320}},{\"start\":{\"dow\":5,\"mod\":915},\"end\":{\"dow\":5,\"mod\":1320}},{\"start\":{\"dow\":6,\"mod\":915},\"end\":{\"dow\":6,\"mod\":1320}},{\"start\":{\"dow\":0,\"mod\":915},\"end\":{\"dow\":0,\"mod\":1320}}]",
        "topic": "",
        "name": "",
        "onPayload": "ON",
        "onPayloadType": "str",
        "offPayload": "OFF",
        "offPayloadType": "str",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": 6,
        "sunShowElevationInStatus": true,
        "outputfreq": "output.statechange.startup",
        "x": 1600,
        "y": 1060,
        "wires": [
            [
                "bc8ef612.550018"
            ]
        ]
    },
    {
        "id": "7e8714fa.6cf4ac",
        "type": "link out",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "c1835942.bb4b38",
            "638d06a4.165c18",
            "9d128e4a.5a16a",
            "13dc619e.b721de",
            "9a4863f0.7800a",
            "30d87a96.92e3e6"
        ],
        "x": 1155,
        "y": 1080,
        "wires": []
    },
    {
        "id": "4bc1286c.b5da88",
        "type": "counter",
        "z": "9a1a2b9e.d6da98",
        "name": "Count to 10",
        "init": "0",
        "step": "1",
        "lower": "0",
        "upper": "11",
        "mode": "increment",
        "outputs": 2,
        "x": 710,
        "y": 1260,
        "wires": [
            [
                "b83d98cc.6b0ef8"
            ],
            []
        ]
    },
    {
        "id": "b83d98cc.6b0ef8",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "10",
                "vt": "str"
            },
            {
                "t": "lt",
                "v": "10",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 690,
        "y": 1160,
        "wires": [
            [
                "e37b696c.404d98"
            ],
            [
                "7dc53ced.884524"
            ],
            [
                "e61a7140.8f1d2"
            ]
        ]
    },
    {
        "id": "e61a7140.8f1d2",
        "type": "delay",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 860,
        "y": 1180,
        "wires": [
            [
                "4bc1286c.b5da88"
            ]
        ]
    },
    {
        "id": "e37b696c.404d98",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "ON",
        "func": "msg.payload = \"ON\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 850,
        "y": 1080,
        "wires": [
            [
                "c4fc6f62.11a4e"
            ]
        ]
    },
    {
        "id": "7dc53ced.884524",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "OFF",
        "func": "msg.payload = \"OFF\";\nmsg.topic = \"#GroupHal\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 850,
        "y": 1120,
        "wires": [
            [
                "c4fc6f62.11a4e"
            ]
        ]
    },
    {
        "id": "288673aa.2ef87c",
        "type": "zigbee2mqtt-in",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "server": "54720da2.31fe84",
        "friendly_name": "Afstandbediening",
        "device_id": "0xec1bbdfffea9d1be",
        "state": "0",
        "outputAtStartup": true,
        "x": 760,
        "y": 120,
        "wires": [
            [
                "2b0ec5d8.21bbca"
            ]
        ]
    },
    {
        "id": "2b0ec5d8.21bbca",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_step_up",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_step_down",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 950,
        "y": 120,
        "wires": [
            [
                "8fe85919.31f4f8"
            ],
            [
                "8fe85919.31f4f8"
            ],
            [],
            []
        ]
    },
    {
        "id": "8fe85919.31f4f8",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "func": "\nmsg.payload = msg.payload.action;\nmsg.topic = \"#All\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1160,
        "y": 100,
        "wires": [
            [
                "75c5ec85.6dc494"
            ]
        ]
    },
    {
        "id": "fdd41a7c.cc8968",
        "type": "zigbee2mqtt-in",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "server": "54720da2.31fe84",
        "friendly_name": "Detector Gang",
        "device_id": "0xbc33acfffe4f688e",
        "state": "0",
        "outputAtStartup": true,
        "x": 120,
        "y": 1420,
        "wires": [
            [
                "1c83a36c.50be1d"
            ]
        ]
    },
    {
        "id": "8924d62e.54e368",
        "type": "link out",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "c1835942.bb4b38",
            "638d06a4.165c18",
            "9d128e4a.5a16a",
            "13dc619e.b721de",
            "9a4863f0.7800a",
            "30d87a96.92e3e6"
        ],
        "x": 1155,
        "y": 1340,
        "wires": []
    },
    {
        "id": "70f04e8.f8d6cb",
        "type": "counter",
        "z": "9a1a2b9e.d6da98",
        "name": "Count to 10",
        "init": "0",
        "step": "1",
        "lower": "0",
        "upper": "11",
        "mode": "increment",
        "outputs": 2,
        "x": 690,
        "y": 1520,
        "wires": [
            [
                "8e113400.e73278"
            ],
            []
        ]
    },
    {
        "id": "8e113400.e73278",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "10",
                "vt": "str"
            },
            {
                "t": "lt",
                "v": "10",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 670,
        "y": 1420,
        "wires": [
            [
                "afd21865.8811c8"
            ],
            [
                "6e74f75.d44d408"
            ],
            [
                "13589335.7a765d"
            ]
        ]
    },
    {
        "id": "13589335.7a765d",
        "type": "delay",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 840,
        "y": 1440,
        "wires": [
            [
                "70f04e8.f8d6cb"
            ]
        ]
    },
    {
        "id": "afd21865.8811c8",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "ON",
        "func": "msg.payload = \"ON\";\nmsg.topic = \"#GroupHal\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 830,
        "y": 1340,
        "wires": [
            [
                "ee77e9f1.52a4e8"
            ]
        ]
    },
    {
        "id": "6e74f75.d44d408",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "OFF",
        "func": "msg.payload = \"OFF\";\nmsg.topic = \"#GroupHal\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 830,
        "y": 1380,
        "wires": [
            [
                "ee77e9f1.52a4e8"
            ]
        ]
    },
    {
        "id": "1c83a36c.50be1d",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "property": "homekit.MotionSensor.MotionDetected",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 290,
        "y": 1420,
        "wires": [
            [
                "1fec9e86.2093e1"
            ]
        ]
    },
    {
        "id": "b0436554.9ec588",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "func": "msg.reset = 1;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 480,
        "y": 1520,
        "wires": [
            [
                "70f04e8.f8d6cb"
            ]
        ]
    },
    {
        "id": "c4fc6f62.11a4e",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "#GroupHal",
        "func": "msg.topic = node.name;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1030,
        "y": 1080,
        "wires": [
            [
                "7e8714fa.6cf4ac"
            ]
        ]
    },
    {
        "id": "ee77e9f1.52a4e8",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "#GroupKeuken",
        "func": "msg.topic = node.name;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1020,
        "y": 1340,
        "wires": [
            [
                "8924d62e.54e368"
            ]
        ]
    },
    {
        "id": "7cb42c01.9901d4",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp Hal A1",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1910,
        "y": 800,
        "wires": []
    },
    {
        "id": "b87bfe7a.d141",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp K1",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 700,
        "wires": []
    },
    {
        "id": "b166c6eb.a186e8",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp K2",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1900,
        "y": 740,
        "wires": []
    },
    {
        "id": "58705d06.02af44",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp Hal A2",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1910,
        "y": 840,
        "wires": []
    },
    {
        "id": "15781976.2a71d7",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp Hal B1",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1910,
        "y": 880,
        "wires": []
    },
    {
        "id": "179b26b6.0eed59",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp Hal B1",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1910,
        "y": 920,
        "wires": []
    },
    {
        "id": "29f97adf.7a52a6",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp Gang",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "#LampGang",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "#All",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1650,
        "y": 980,
        "wires": [
            [
                "319e4e52.4ce6b2"
            ],
            [
                "319e4e52.4ce6b2"
            ]
        ]
    },
    {
        "id": "30d87a96.92e3e6",
        "type": "link in",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "75c5ec85.6dc494",
            "7e8714fa.6cf4ac",
            "68fe2998.c8cfd8",
            "8924d62e.54e368",
            "be52903e.9bfb5"
        ],
        "x": 1495,
        "y": 980,
        "wires": [
            [
                "29f97adf.7a52a6"
            ]
        ]
    },
    {
        "id": "319e4e52.4ce6b2",
        "type": "zigbee2mqtt-out",
        "z": "9a1a2b9e.d6da98",
        "name": "Lamp Gang",
        "server": "54720da2.31fe84",
        "friendly_name": "Lamp 1",
        "device_id": "0x842e14fffe2a3505",
        "command": "state",
        "commandType": "z2m_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transition": 0,
        "x": 1910,
        "y": 980,
        "wires": []
    },
    {
        "id": "be52903e.9bfb5",
        "type": "link out",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "links": [
            "c1835942.bb4b38",
            "638d06a4.165c18",
            "9d128e4a.5a16a",
            "13dc619e.b721de",
            "9a4863f0.7800a",
            "30d87a96.92e3e6"
        ],
        "x": 1155,
        "y": 1600,
        "wires": []
    },
    {
        "id": "99f644c7.ac4ed8",
        "type": "counter",
        "z": "9a1a2b9e.d6da98",
        "name": "Count to 10",
        "init": "0",
        "step": "1",
        "lower": "0",
        "upper": "11",
        "mode": "increment",
        "outputs": 2,
        "x": 690,
        "y": 1780,
        "wires": [
            [
                "7e2448b3.82fb28"
            ],
            []
        ]
    },
    {
        "id": "7e2448b3.82fb28",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "10",
                "vt": "str"
            },
            {
                "t": "lt",
                "v": "10",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 670,
        "y": 1680,
        "wires": [
            [
                "a549f178.fa52b"
            ],
            [
                "b5d946ef.af81c8"
            ],
            [
                "67227b02.78e684"
            ]
        ]
    },
    {
        "id": "67227b02.78e684",
        "type": "delay",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 840,
        "y": 1700,
        "wires": [
            [
                "99f644c7.ac4ed8"
            ]
        ]
    },
    {
        "id": "a549f178.fa52b",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "ON",
        "func": "msg.payload = \"ON\";\nmsg.topic = \"#GroupHal\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 830,
        "y": 1600,
        "wires": [
            [
                "5d69cb2.b300d34"
            ]
        ]
    },
    {
        "id": "b5d946ef.af81c8",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "OFF",
        "func": "msg.payload = \"OFF\";\nmsg.topic = \"#GroupHal\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 830,
        "y": 1640,
        "wires": [
            [
                "5d69cb2.b300d34"
            ]
        ]
    },
    {
        "id": "5d69cb2.b300d34",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "#LampGang",
        "func": "msg.topic = node.name;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1010,
        "y": 1600,
        "wires": [
            [
                "be52903e.9bfb5"
            ]
        ]
    },
    {
        "id": "fe321b77.50b858",
        "type": "function",
        "z": "1112a3ea.54efdc",
        "name": "Format Data",
        "func": "var groupname = flow.get('groupname');\nvar device = flow.get('device');\n\nif (typeof groupname !== undefined && typeof device !== undefined) {\n    var action = \"Adding \";\n    var what = \" to group \";\n    if(msg.payload == \"remove\") {\n        action = \"Removing \";\n        what = \" from group \";\n    }\nvar msg1 = { payload: device, topic: \"zigbee2mqtt/bridge/group/\" + groupname + \"/\" + msg.payload};\nvar msg2 = { payload: action + \" \" + device + what + groupname };\n\nreturn [msg1, msg2];\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 770,
        "y": 1920,
        "wires": [
            [
                "67f130eb.efef3"
            ],
            [
                "89490386.cf438"
            ]
        ]
    },
    {
        "id": "22d38d69.8b8e12",
        "type": "ui_button",
        "z": "1112a3ea.54efdc",
        "name": "",
        "group": "38009ddc.858562",
        "order": 9,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Add to group",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Add",
        "payloadType": "str",
        "topic": "",
        "x": 110,
        "y": 1900,
        "wires": [
            [
                "463d3907.451408"
            ]
        ]
    },
    {
        "id": "89490386.cf438",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "d": true,
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "System Notification",
        "name": "",
        "x": 810,
        "y": 1980,
        "wires": []
    },
    {
        "id": "d7c7c87a.3b1e58",
        "type": "comment",
        "z": "1112a3ea.54efdc",
        "name": "Group management",
        "info": "",
        "x": 130,
        "y": 1460,
        "wires": []
    },
    {
        "id": "fae942d1.d6e91",
        "type": "function",
        "z": "1112a3ea.54efdc",
        "name": "Format Data",
        "func": "var srcdev = flow.get('device');\nvar bindtarget = flow.get('bindtarget');\n\nif (typeof srcdev !== undefined && typeof bindtarget !== undefined) {\n  msg1 = { 'payload': bindtarget, 'topic': 'zigbee2mqtt/bridge/' + msg.payload + '/' + srcdev};\n  msg2 = { 'payload': msg.payload + ' ' + srcdev + ' to target ' + bindtarget };\n\n  return [msg1, msg2];\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 750,
        "y": 2260,
        "wires": [
            [
                "bf8faaff.5215b8"
            ],
            [
                "a7b346c6.0c9d18"
            ]
        ]
    },
    {
        "id": "a29bad1b.88ab",
        "type": "ui_button",
        "z": "1112a3ea.54efdc",
        "name": "",
        "group": "38009ddc.858562",
        "order": 13,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Bind device",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Bind",
        "payloadType": "str",
        "topic": "",
        "x": 110,
        "y": 2240,
        "wires": [
            [
                "4d02aaf3.2fbb24"
            ]
        ]
    },
    {
        "id": "1352a9c5.0a7b96",
        "type": "mqtt in",
        "z": "1112a3ea.54efdc",
        "name": "",
        "topic": "zigbee2mqtt/#",
        "qos": "2",
        "datatype": "utf8",
        "broker": "4ec1ae6.5ee7c5",
        "x": 110,
        "y": 100,
        "wires": [
            [
                "5564a681.f2b1d8"
            ]
        ]
    },
    {
        "id": "a600ffb3.fdd1b",
        "type": "switch",
        "z": "1112a3ea.54efdc",
        "name": "log type",
        "property": "payload.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "devices",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "groups",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "zigbee_publish_error",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 540,
        "y": 540,
        "wires": [
            [
                "dc9da24.290da6"
            ],
            [
                "9cce1a99.a33f28"
            ],
            [
                "a4e5b5d9.2c3e88"
            ],
            [
                "e3b7ead2.4ac6f8"
            ]
        ]
    },
    {
        "id": "ba524055.a6136",
        "type": "json",
        "z": "1112a3ea.54efdc",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 410,
        "y": 540,
        "wires": [
            [
                "a600ffb3.fdd1b"
            ]
        ]
    },
    {
        "id": "dc9da24.290da6",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M LOG DEVICELIST",
        "links": [
            "28c00ddc.4dea62",
            "94e9b5e4.4a4158"
        ],
        "x": 695,
        "y": 500,
        "wires": []
    },
    {
        "id": "87ab5849.f09d28",
        "type": "function",
        "z": "1112a3ea.54efdc",
        "name": "Reformat for list",
        "func": "newPayload = [];\nmsg.payload.message.forEach(function(entry) {\n    if(entry.type != 'Coordinator') {\n      newentry = {'title': entry.friendly_name, \n               'description': entry.model + ' (' + entry.ieeeAddr + ')',\n               'icon': 'https://www.zigbee2mqtt.io/images/devices/' + entry.model.replace(new RegExp('/', 'g'), '-') + '.jpg'\n      };\n      newPayload.push(newentry);\n    }\n});\n\nmsg.payload=newPayload;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 180,
        "y": 920,
        "wires": [
            [
                "6c06b987.6f7098"
            ]
        ]
    },
    {
        "id": "28c00ddc.4dea62",
        "type": "link in",
        "z": "1112a3ea.54efdc",
        "name": "Z2M DEV LIST INPUT",
        "links": [
            "dc9da24.290da6"
        ],
        "x": 55,
        "y": 940,
        "wires": [
            [
                "87ab5849.f09d28",
                "f3505bcc.2352d8"
            ]
        ]
    },
    {
        "id": "6c06b987.6f7098",
        "type": "ui_list",
        "z": "1112a3ea.54efdc",
        "group": "902c151e.212a38",
        "name": "Devices",
        "order": 1,
        "width": "6",
        "height": "11",
        "lineType": "three",
        "actionType": "click",
        "allowHTML": true,
        "outputs": 1,
        "x": 340,
        "y": 920,
        "wires": [
            [
                "9fa73b15.846b38"
            ]
        ]
    },
    {
        "id": "9fa73b15.846b38",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "device",
                "pt": "flow",
                "to": "payload.title",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 960,
        "wires": [
            [
                "1a63fe7a.9d0142",
                "4b968044.ca533",
                "4d2d1114.f6adf"
            ]
        ]
    },
    {
        "id": "ab86c3a1.ed149",
        "type": "mqtt out",
        "z": "1112a3ea.54efdc",
        "name": "Generic output",
        "topic": "",
        "qos": "",
        "retain": "false",
        "broker": "4ec1ae6.5ee7c5",
        "x": 420,
        "y": 160,
        "wires": []
    },
    {
        "id": "398af7a3.80e388",
        "type": "link in",
        "z": "1112a3ea.54efdc",
        "name": "Z2M GENERIC MQTT OUT",
        "links": [
            "67f130eb.efef3",
            "458d2db0.4f1c14",
            "3b86e8ee.a04ed8",
            "632c3105.5495f",
            "bf8faaff.5215b8",
            "75d20744.52cef8",
            "207b74ec.1d3f1c",
            "699fc636.402658"
        ],
        "x": 55,
        "y": 160,
        "wires": [
            [
                "ab86c3a1.ed149"
            ]
        ]
    },
    {
        "id": "67f130eb.efef3",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M GROUP BIND OUT",
        "links": [
            "398af7a3.80e388"
        ],
        "x": 875,
        "y": 1900,
        "wires": []
    },
    {
        "id": "f3505bcc.2352d8",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "devices",
                "pt": "flow",
                "to": "payload.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "1a63fe7a.9d0142",
        "type": "function",
        "z": "1112a3ea.54efdc",
        "name": "Lookup device details",
        "func": "devices = flow.get('devices');\n\nfor (var i in devices) {\n    if(devices[i].friendly_name == msg.payload.title) {\n        flow.set('seldevice_details', devices[i]);\n        msg.payload = devices[i];\n        return msg;\n    }\n}\n\nmsg.payload.friendly_name='unknown';\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 600,
        "y": 960,
        "wires": [
            [
                "46646ab3.510094"
            ]
        ]
    },
    {
        "id": "9de0998d.8b3668",
        "type": "function",
        "z": "1112a3ea.54efdc",
        "name": "Reformat for dropdown",
        "func": "newPayload = [];\nmsg.payload.message.forEach(function(entry) {\n    newPayload.push(entry.friendly_name);\n});\n\nnewMsg = {'payload': flow.get('bindtarget'), 'options': newPayload};\n\nreturn newMsg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 200,
        "y": 2180,
        "wires": [
            [
                "ce73ad6f.0b69"
            ]
        ]
    },
    {
        "id": "94e9b5e4.4a4158",
        "type": "link in",
        "z": "1112a3ea.54efdc",
        "name": "Z2M BIND LIST INPUT",
        "links": [
            "dc9da24.290da6"
        ],
        "x": 55,
        "y": 2180,
        "wires": [
            [
                "9de0998d.8b3668"
            ]
        ]
    },
    {
        "id": "ce73ad6f.0b69",
        "type": "ui_dropdown",
        "z": "1112a3ea.54efdc",
        "name": "",
        "label": "Target device",
        "tooltip": "",
        "place": "Select target device",
        "group": "38009ddc.858562",
        "order": 12,
        "width": "6",
        "height": "1",
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "",
        "x": 410,
        "y": 2180,
        "wires": [
            [
                "74886cbc.2a0f14"
            ]
        ]
    },
    {
        "id": "74886cbc.2a0f14",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "bindtarget",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 2180,
        "wires": [
            []
        ]
    },
    {
        "id": "c1eb42c4.f454a",
        "type": "inject",
        "z": "1112a3ea.54efdc",
        "name": "",
        "repeat": "6",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 1140,
        "wires": [
            [
                "ba7821e1.93e46"
            ]
        ]
    },
    {
        "id": "260ce836.2e4f98",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "bridgestate",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "450f3b02.985824",
        "type": "ui_button",
        "z": "1112a3ea.54efdc",
        "name": "",
        "group": "38009ddc.858562",
        "order": 10,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Remove from group",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Remove",
        "payloadType": "str",
        "topic": "",
        "x": 140,
        "y": 1940,
        "wires": [
            [
                "3b260768.9d2d38"
            ]
        ]
    },
    {
        "id": "14507948.bc92c7",
        "type": "ui_button",
        "z": "1112a3ea.54efdc",
        "name": "",
        "group": "38009ddc.858562",
        "order": 14,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Unbind device",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Unbind",
        "payloadType": "str",
        "topic": "",
        "x": 120,
        "y": 2280,
        "wires": [
            [
                "2862cc.8a6c4d34"
            ]
        ]
    },
    {
        "id": "463d3907.451408",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{{payload}} device <b>{{flow.device}}</b> in group <b>{{flow.groupname}}</b>?",
        "output": "str",
        "x": 320,
        "y": 1900,
        "wires": [
            [
                "d1c4f87f.dbce28"
            ]
        ]
    },
    {
        "id": "d1c4f87f.dbce28",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "outputs": 1,
        "ok": "add",
        "cancel": "cancel",
        "topic": "Add to group",
        "name": "",
        "x": 470,
        "y": 1900,
        "wires": [
            [
                "b7ebccd6.217c7"
            ]
        ]
    },
    {
        "id": "b7ebccd6.217c7",
        "type": "switch",
        "z": "1112a3ea.54efdc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "add",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "remove",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "cancel",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 630,
        "y": 1920,
        "wires": [
            [
                "fe321b77.50b858"
            ],
            [
                "fe321b77.50b858"
            ],
            []
        ]
    },
    {
        "id": "3b260768.9d2d38",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{{payload}} device <b>{{flow.device}}</b> in group <b>{{flow.groupname}}</b>?",
        "output": "str",
        "x": 320,
        "y": 1940,
        "wires": [
            [
                "99104ccd.a2827"
            ]
        ]
    },
    {
        "id": "99104ccd.a2827",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "outputs": 1,
        "ok": "remove",
        "cancel": "cancel",
        "topic": "Remove from group",
        "name": "",
        "x": 470,
        "y": 1940,
        "wires": [
            [
                "b7ebccd6.217c7"
            ]
        ]
    },
    {
        "id": "4d02aaf3.2fbb24",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{{payload}} device <b>{{flow.device}}</b> to <b>{{flow.bindtarget}}</b>?",
        "output": "str",
        "x": 280,
        "y": 2240,
        "wires": [
            [
                "28efb09d.6d9cb"
            ]
        ]
    },
    {
        "id": "28efb09d.6d9cb",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "outputs": 1,
        "ok": "bind",
        "cancel": "cancel",
        "topic": "Bind device",
        "name": "",
        "x": 430,
        "y": 2240,
        "wires": [
            [
                "5f4235aa.d48c2c"
            ]
        ]
    },
    {
        "id": "2862cc.8a6c4d34",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{{payload}} device <b>{{flow.device}}</b> from <b>{{flow.bindtarget}}</b>?",
        "output": "str",
        "x": 280,
        "y": 2280,
        "wires": [
            [
                "b41dcb39.fffc48"
            ]
        ]
    },
    {
        "id": "b41dcb39.fffc48",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "outputs": 1,
        "ok": "unbind",
        "cancel": "cancel",
        "topic": "Unbind device",
        "name": "",
        "x": 430,
        "y": 2280,
        "wires": [
            [
                "5f4235aa.d48c2c"
            ]
        ]
    },
    {
        "id": "5f4235aa.d48c2c",
        "type": "switch",
        "z": "1112a3ea.54efdc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "bind",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "unbind",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "cancel",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 590,
        "y": 2260,
        "wires": [
            [
                "fae942d1.d6e91"
            ],
            [
                "fae942d1.d6e91"
            ],
            []
        ]
    },
    {
        "id": "af2bd47b.bb43c8",
        "type": "ui_text_input",
        "z": "1112a3ea.54efdc",
        "name": "",
        "label": "New device name",
        "tooltip": "",
        "group": "38009ddc.858562",
        "order": 5,
        "width": "6",
        "height": "1",
        "passthru": true,
        "mode": "text",
        "delay": "100",
        "topic": "",
        "x": 130,
        "y": 1860,
        "wires": [
            [
                "740e14d9.a5ad0c"
            ]
        ]
    },
    {
        "id": "67a03950.a9be58",
        "type": "comment",
        "z": "1112a3ea.54efdc",
        "name": "Device management",
        "info": "",
        "x": 130,
        "y": 1740,
        "wires": []
    },
    {
        "id": "740e14d9.a5ad0c",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "newdevicename",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 1860,
        "wires": [
            []
        ]
    },
    {
        "id": "3f245891.878948",
        "type": "ui_button",
        "z": "1112a3ea.54efdc",
        "name": "",
        "group": "38009ddc.858562",
        "order": 6,
        "width": "6",
        "height": "1",
        "passthru": false,
        "label": "Rename device",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Rename",
        "payloadType": "str",
        "topic": "",
        "x": 120,
        "y": 2080,
        "wires": [
            [
                "16376b86.70cdb4"
            ]
        ]
    },
    {
        "id": "16376b86.70cdb4",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{{payload}} device <b>{{flow.device}}</b> to <b>{{flow.newdevicename}}</b>?",
        "output": "str",
        "x": 280,
        "y": 2080,
        "wires": [
            [
                "1c5b4126.8d8daf"
            ]
        ]
    },
    {
        "id": "1c5b4126.8d8daf",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "outputs": 1,
        "ok": "rename",
        "cancel": "cancel",
        "topic": "Rename device",
        "name": "",
        "x": 430,
        "y": 2080,
        "wires": [
            [
                "c65c2cb3.8fafb"
            ]
        ]
    },
    {
        "id": "c65c2cb3.8fafb",
        "type": "switch",
        "z": "1112a3ea.54efdc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "rename",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "cancel",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 570,
        "y": 2080,
        "wires": [
            [
                "6a0ab4e.825834c"
            ],
            []
        ]
    },
    {
        "id": "6a0ab4e.825834c",
        "type": "function",
        "z": "1112a3ea.54efdc",
        "name": "Format Data",
        "func": "var oldname = flow.get('device');\nvar newname = flow.get('newdevicename');\n\nif (typeof oldname !== undefined && typeof newname !== undefined) {\n  msg1 = { 'payload': {\"old\": oldname, \"new\": newname}, 'topic': 'zigbee2mqtt/bridge/config/rename'};\n  msg2 = { 'payload': msg.payload + ' ' + oldname + ' to ' + newname };\n\n  return [msg1, msg2];\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 730,
        "y": 2080,
        "wires": [
            [
                "75d20744.52cef8"
            ],
            [
                "6c972cc3.1c1ce4"
            ]
        ]
    },
    {
        "id": "6c972cc3.1c1ce4",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "d": true,
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "System Notification",
        "name": "",
        "x": 790,
        "y": 2140,
        "wires": []
    },
    {
        "id": "6d78e825.7722f8",
        "type": "switch",
        "z": "1112a3ea.54efdc",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "regex",
                "v": ".*/bridge/state",
                "vt": "str",
                "case": false
            },
            {
                "t": "regex",
                "v": ".*/bridge/log",
                "vt": "str",
                "case": false
            },
            {
                "t": "regex",
                "v": ".*/bridge/config$",
                "vt": "str",
                "case": false
            },
            {
                "t": "regex",
                "v": ".*/networkmap/graphviz$",
                "vt": "str",
                "case": false
            },
            {
                "t": "regex",
                "v": ".*/bridge/config/.*",
                "vt": "str",
                "case": false
            },
            {
                "t": "regex",
                "v": "^(?!.*get$|.*set$).*$",
                "vt": "str",
                "case": false
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 6,
        "x": 230,
        "y": 540,
        "wires": [
            [
                "260ce836.2e4f98"
            ],
            [
                "ba524055.a6136"
            ],
            [
                "3d8a0b9a.aa0504"
            ],
            [
                "162ed5bf.58dd8a"
            ],
            [],
            [
                "d3fbf1d9.d4525"
            ]
        ]
    },
    {
        "id": "3d8a0b9a.aa0504",
        "type": "json",
        "z": "1112a3ea.54efdc",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 410,
        "y": 620,
        "wires": [
            [
                "619cfbc2.0293b4"
            ]
        ]
    },
    {
        "id": "619cfbc2.0293b4",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M BRIDGE CONFIG INPUT",
        "links": [
            "d983172a.616bc8"
        ],
        "x": 515,
        "y": 620,
        "wires": []
    },
    {
        "id": "61a80af8.34eb64",
        "type": "ui_switch",
        "z": "1112a3ea.54efdc",
        "name": "",
        "label": "Permit join",
        "tooltip": "",
        "group": "d40979a3.d11a08",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "zigbee2mqtt/bridge/config/permit_join",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 470,
        "y": 1280,
        "wires": [
            [
                "3b86e8ee.a04ed8"
            ]
        ]
    },
    {
        "id": "aef8aa15.a42ce8",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.permit_join",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 250,
        "y": 1280,
        "wires": [
            [
                "61a80af8.34eb64"
            ]
        ]
    },
    {
        "id": "d983172a.616bc8",
        "type": "link in",
        "z": "1112a3ea.54efdc",
        "name": "Z2M BRIDGE CONFIG",
        "links": [
            "619cfbc2.0293b4"
        ],
        "x": 55,
        "y": 1280,
        "wires": [
            [
                "aef8aa15.a42ce8",
                "67251463.751fec",
                "be14f64d.ceb358",
                "56f299a2.6327d8"
            ]
        ]
    },
    {
        "id": "2efc8bac.a29ab4",
        "type": "ui_dropdown",
        "z": "1112a3ea.54efdc",
        "name": "",
        "label": "Log level",
        "tooltip": "",
        "place": "Select log level",
        "group": "d40979a3.d11a08",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [
            {
                "label": "Info",
                "value": "info",
                "type": "str"
            },
            {
                "label": "Debug",
                "value": "debug",
                "type": "str"
            },
            {
                "label": "Warn",
                "value": "warn",
                "type": "str"
            },
            {
                "label": "Error",
                "value": "error",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "zigbee2mqtt/bridge/config/log_level",
        "x": 460,
        "y": 1320,
        "wires": [
            [
                "3b86e8ee.a04ed8"
            ]
        ]
    },
    {
        "id": "3b86e8ee.a04ed8",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M BRIDGE CONFIG OUT",
        "links": [
            "398af7a3.80e388"
        ],
        "x": 615,
        "y": 1300,
        "wires": []
    },
    {
        "id": "67251463.751fec",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.log_level",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 1320,
        "wires": [
            [
                "2efc8bac.a29ab4"
            ]
        ]
    },
    {
        "id": "e3b7ead2.4ac6f8",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M NOTIFICATIONS OUT",
        "links": [
            "71034afb.6773f4"
        ],
        "x": 695,
        "y": 600,
        "wires": []
    },
    {
        "id": "b2123a08.a7deb8",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "d": true,
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 840,
        "y": 2600,
        "wires": []
    },
    {
        "id": "71034afb.6773f4",
        "type": "link in",
        "z": "1112a3ea.54efdc",
        "name": "Z2M NOTIFICATIONS INPUT",
        "links": [
            "e3b7ead2.4ac6f8"
        ],
        "x": 65,
        "y": 2580,
        "wires": [
            [
                "f24e73c5.e5cad"
            ]
        ]
    },
    {
        "id": "7d4fa71c.1ec908",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "payload.type",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.message",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 2680,
        "wires": [
            [
                "b2123a08.a7deb8"
            ]
        ]
    },
    {
        "id": "7475bcd5.f978c4",
        "type": "comment",
        "z": "1112a3ea.54efdc",
        "name": "Bridge status",
        "info": "",
        "x": 110,
        "y": 1100,
        "wires": []
    },
    {
        "id": "99d65db9.18641",
        "type": "ui_button",
        "z": "1112a3ea.54efdc",
        "name": "remove device",
        "group": "38009ddc.858562",
        "order": 3,
        "width": "6",
        "height": "1",
        "passthru": false,
        "label": "Remove device",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "remove",
        "payloadType": "str",
        "topic": "",
        "x": 120,
        "y": 1820,
        "wires": [
            [
                "d0e1401d.17d42"
            ]
        ]
    },
    {
        "id": "d0e1401d.17d42",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{{payload}} device <b>{{flow.device}}</b> permanently?",
        "output": "str",
        "x": 280,
        "y": 1820,
        "wires": [
            [
                "215d69ec.df3ec6"
            ]
        ]
    },
    {
        "id": "215d69ec.df3ec6",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "outputs": 1,
        "ok": "remove",
        "cancel": "cancel",
        "topic": "Remove device",
        "name": "",
        "x": 430,
        "y": 1820,
        "wires": [
            [
                "cc05901d.7d2bb"
            ]
        ]
    },
    {
        "id": "cc05901d.7d2bb",
        "type": "switch",
        "z": "1112a3ea.54efdc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "remove",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "cancel",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 570,
        "y": 1820,
        "wires": [
            [
                "d44c81f5.d4712"
            ],
            []
        ]
    },
    {
        "id": "d44c81f5.d4712",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "zigbee2mqtt/bridge/config/remove",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "device",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 1820,
        "wires": [
            [
                "207b74ec.1d3f1c"
            ]
        ]
    },
    {
        "id": "4fe45eac.983e",
        "type": "ui_text",
        "z": "1112a3ea.54efdc",
        "group": "d40979a3.d11a08",
        "order": 4,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Status",
        "format": "{{msg.payload.bridgestate}}",
        "layout": "row-left",
        "x": 510,
        "y": 1200,
        "wires": []
    },
    {
        "id": "d36f839f.5fd8a",
        "type": "ui_text",
        "z": "1112a3ea.54efdc",
        "group": "d40979a3.d11a08",
        "order": 7,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Devices",
        "format": "{{msg.payload.numdevices}}",
        "layout": "row-left",
        "x": 520,
        "y": 1160,
        "wires": []
    },
    {
        "id": "ba7821e1.93e46",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload.numdevices",
                "pt": "msg",
                "to": "devices.length",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "payload.bridgestate",
                "pt": "msg",
                "to": "bridgestate",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "payload.nwlast",
                "pt": "msg",
                "to": "networkmap_last",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 1140,
        "wires": [
            [
                "d36f839f.5fd8a",
                "4fe45eac.983e",
                "7e27d95b.8f7028"
            ]
        ]
    },
    {
        "id": "46646ab3.510094",
        "type": "function",
        "z": "1112a3ea.54efdc",
        "name": "Reformat for details",
        "func": "newPayload = [];\n\nnewentry = {\n             'title': msg.payload.friendly_name,\n             'description': 'zigbee2mqtt/' + msg.payload.friendly_name,\n             'icon': 'https://www.zigbee2mqtt.io/images/logo.png'\n};\nnewPayload.push(newentry);\nnewentry = {\n             'title': msg.payload.ieeeAddr,\n             'description': 'NwkAddr: ' + msg.payload.nwkAddr + ' / manufId: ' + msg.payload.manufId,\n             'icon_name': 'settings_input_antenna'\n};\nnewPayload.push(newentry);\nnewentry = { \n             'title': msg.payload.model,\n             'description': msg.payload.modelId,\n             'icon': 'https://www.zigbee2mqtt.io/images/devices/' + msg.payload.model.replace(new RegExp('/', 'g'), '-') + '.jpg'\n};\nnewPayload.push(newentry);\nnewentry = { \n             'title': msg.payload.manufName,\n             'description': 'HW: ' + msg.payload.hwVersion + ' / SW: ' + msg.payload.swBuildId,\n             'icon_name': 'bookmark'\n};\nnewPayload.push(newentry);\nvar type_icon = msg.payload.type=='Router' ? 'device_hub' : 'input';\nnewentry = {\n             'title': msg.payload.type,\n             'description': 'Powersource: ' + msg.payload.powerSource,\n             'icon_name': type_icon\n};\nnewPayload.push(newentry);\n\nmsg.payload=newPayload;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 630,
        "y": 1020,
        "wires": [
            [
                "2694bda5.0e1732"
            ]
        ]
    },
    {
        "id": "162ed5bf.58dd8a",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "save networkmap",
        "rules": [
            {
                "t": "set",
                "p": "networkmap",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "networkmap_last",
                "pt": "flow",
                "to": "",
                "tot": "date"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 680,
        "wires": [
            [
                "9596b7ff.dac428"
            ]
        ]
    },
    {
        "id": "5857ba56.3a5444",
        "type": "http in",
        "z": "1112a3ea.54efdc",
        "name": "",
        "url": "/z2mpanel/networkmap",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 3080,
        "wires": [
            [
                "368af09e.feec5"
            ]
        ]
    },
    {
        "id": "368af09e.feec5",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "Render page",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<html>\n    <head>\n        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n        <meta charset=\"utf-8\">\n        <title>Network topology</title>\n         <style>\n    #graphviz_svg_div svg {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n    }\n    \n    </style>\n    </head>\n    <body>\n        <div id=\"graphviz_svg_div\"></div>\n        <script language=\"javascript\" type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/viz.js@2.1.2/viz.js\"></script>\n        <script language=\"javascript\" type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/viz.js@2.1.2/full.render.js\"></script>\n        <script language=\"javascript\" type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.0/dist/svg-pan-zoom.min.js\"></script>\n        <script type=\"bogus\" id=\"graphviz_input\">\n            {{{flow.networkmap}}}\n        </script>\n        <script language=\"javascript\" type=\"text/javascript\">\n            document.addEventListener(\"DOMContentLoaded\", function(event) {\n            var viz = new Viz();\n            var svg = document.getElementById(\"graphviz_input\").innerHTML;\n            viz.renderSVGElement(svg, {engine: \"{{{flow.nwrenderengine}}}\"})\n            .then(function(element) {\n                document.getElementById(\"graphviz_svg_div\").appendChild(element);\n                panZoom = svgPanZoom(element, {\n                    zoomEnabled: true,\n                    controlIconsEnabled: true,\n                    fit: true,\n                    center: true,\n                    minZoom: 0.1\n                });\n\n                element.addEventListener('paneresize', function(e) {\n                    panZoom.resize();\n                }, false);\n                window.addEventListener('resize', function(e) {\n                    panZoom.resize();\n                });\n            })\n            .catch(error => {\n                // Create a new Viz instance (@see Caveats page for more info)\n                viz = new Viz();\n\n                // Possibly display the error\n                console.error(error);\n            });\n            //var svg = Viz(document.getElementById(\"graphviz_input\").innerHTML, \"svg\", {render: \"circo\"});\n            //document.getElementById(\"graphviz_svg_div\").innerHTML = svg;\n            });\n        </script>\n    </body>\n</html>",
        "output": "str",
        "x": 450,
        "y": 3080,
        "wires": [
            [
                "65139275.6e325c"
            ]
        ]
    },
    {
        "id": "65139275.6e325c",
        "type": "http response",
        "z": "1112a3ea.54efdc",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 650,
        "y": 3080,
        "wires": []
    },
    {
        "id": "2ba4c4f9.de559c",
        "type": "ui_template",
        "z": "1112a3ea.54efdc",
        "group": "fd4925c4.d13458",
        "name": "iframe nw map",
        "order": 0,
        "width": "27",
        "height": "11",
        "format": "<iframe frameborder=\"0\" width=\"100%\" height=\"100%\" src=\"/z2mpanel/networkmap\"></iframe>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "templateScope": "local",
        "x": 120,
        "y": 3040,
        "wires": [
            []
        ]
    },
    {
        "id": "2694bda5.0e1732",
        "type": "ui_list",
        "z": "1112a3ea.54efdc",
        "group": "ee188496.59ff28",
        "name": "Selected device",
        "order": 1,
        "width": "6",
        "height": "7",
        "lineType": "three",
        "actionType": "none",
        "allowHTML": true,
        "outputs": 1,
        "x": 820,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "5821943.e8f1e6c",
        "type": "comment",
        "z": "1112a3ea.54efdc",
        "name": "Device list & selected device",
        "info": "",
        "x": 160,
        "y": 880,
        "wires": []
    },
    {
        "id": "202259f7.b7a9c6",
        "type": "inject",
        "z": "1112a3ea.54efdc",
        "name": "Create network map",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "10",
        "topic": "zigbee2mqtt/bridge/networkmap",
        "payload": "graphviz",
        "payloadType": "str",
        "x": 130,
        "y": 200,
        "wires": [
            [
                "ab86c3a1.ed149"
            ]
        ]
    },
    {
        "id": "dcf15903.6ff8e8",
        "type": "inject",
        "z": "1112a3ea.54efdc",
        "name": "Request Device List",
        "repeat": "5",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "zigbee2mqtt/bridge/config/devices/get",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 240,
        "wires": [
            [
                "ab86c3a1.ed149"
            ]
        ]
    },
    {
        "id": "62a2e5be.e305bc",
        "type": "ui_button",
        "z": "1112a3ea.54efdc",
        "name": "Create nw map",
        "group": "d40979a3.d11a08",
        "order": 12,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "Refresh network map",
        "color": "",
        "bgcolor": "",
        "icon": "refresh",
        "payload": "graphviz",
        "payloadType": "str",
        "topic": "zigbee2mqtt/bridge/networkmap",
        "x": 120,
        "y": 2880,
        "wires": [
            [
                "632c3105.5495f"
            ]
        ]
    },
    {
        "id": "632c3105.5495f",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M NW MAP GEN",
        "links": [
            "398af7a3.80e388"
        ],
        "x": 255,
        "y": 2880,
        "wires": []
    },
    {
        "id": "f24e73c5.e5cad",
        "type": "switch",
        "z": "1112a3ea.54efdc",
        "name": "",
        "property": "payload.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "pairing",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "device_connected",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "device_removed",
                "vt": "str"
            },
            {
                "t": "istype",
                "v": "object",
                "vt": "object"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 5,
        "x": 160,
        "y": 2580,
        "wires": [
            [
                "1e0e2fff.2eee5"
            ],
            [
                "eaaa0045.a639"
            ],
            [
                "51ff0ea1.0a919"
            ],
            [
                "8ae66b7.1c0af98"
            ],
            [
                "7d4fa71c.1ec908"
            ]
        ]
    },
    {
        "id": "1e0e2fff.2eee5",
        "type": "switch",
        "z": "1112a3ea.54efdc",
        "name": "",
        "property": "payload.message",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "connecting with device",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "device incoming",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 320,
        "y": 2480,
        "wires": [
            [
                "2d86241a.ba284c"
            ],
            [
                "7fc722db.eb28ac"
            ]
        ]
    },
    {
        "id": "2d86241a.ba284c",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "A device is attempting to pair...",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 2460,
        "wires": [
            [
                "b2123a08.a7deb8"
            ]
        ]
    },
    {
        "id": "7fc722db.eb28ac",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "A device is incoming or repairing...",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 2500,
        "wires": [
            [
                "b2123a08.a7deb8"
            ]
        ]
    },
    {
        "id": "eaaa0045.a639",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Device paired successfully: {{msg.payload.message}}",
        "output": "str",
        "x": 330,
        "y": 2540,
        "wires": [
            [
                "b2123a08.a7deb8"
            ]
        ]
    },
    {
        "id": "51ff0ea1.0a919",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Deviced removed: {{msg.payload.message}}",
        "output": "str",
        "x": 330,
        "y": 2580,
        "wires": [
            [
                "b2123a08.a7deb8"
            ]
        ]
    },
    {
        "id": "61db4308.05a59c",
        "type": "comment",
        "z": "1112a3ea.54efdc",
        "name": "Notifications",
        "info": "",
        "x": 120,
        "y": 2420,
        "wires": []
    },
    {
        "id": "a7b346c6.0c9d18",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "d": true,
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "System Notification",
        "name": "",
        "x": 790,
        "y": 2320,
        "wires": []
    },
    {
        "id": "bf8faaff.5215b8",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M BINDING OUT",
        "links": [
            "398af7a3.80e388"
        ],
        "x": 875,
        "y": 2240,
        "wires": []
    },
    {
        "id": "75d20744.52cef8",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M RENAME OUT",
        "links": [
            "398af7a3.80e388"
        ],
        "x": 855,
        "y": 2060,
        "wires": []
    },
    {
        "id": "207b74ec.1d3f1c",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M REMOVE OUT",
        "links": [
            "398af7a3.80e388"
        ],
        "x": 835,
        "y": 1820,
        "wires": []
    },
    {
        "id": "6e76defe.80e97",
        "type": "comment",
        "z": "1112a3ea.54efdc",
        "name": "Zigbee2Mqtt Admin Panel",
        "info": "",
        "x": 150,
        "y": 40,
        "wires": []
    },
    {
        "id": "638e5203.cd6f8c",
        "type": "comment",
        "z": "1112a3ea.54efdc",
        "name": "---- Dont change things down here ----",
        "info": "",
        "x": 190,
        "y": 400,
        "wires": []
    },
    {
        "id": "8ae66b7.1c0af98",
        "type": "switch",
        "z": "1112a3ea.54efdc",
        "name": "",
        "property": "payload.type.group",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 410,
        "y": 2620,
        "wires": [
            [
                "587b2872.f7c9c8"
            ]
        ]
    },
    {
        "id": "587b2872.f7c9c8",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Succesfully changed device {{payload.type.device}} in group {{payload.type.group}}",
        "output": "str",
        "x": 570,
        "y": 2620,
        "wires": [
            [
                "b2123a08.a7deb8"
            ]
        ]
    },
    {
        "id": "cd065e2e.3e334",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "d": true,
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 880,
        "y": 640,
        "wires": []
    },
    {
        "id": "9596b7ff.dac428",
        "type": "debug",
        "z": "1112a3ea.54efdc",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "x": 650,
        "y": 680,
        "wires": []
    },
    {
        "id": "7e27d95b.8f7028",
        "type": "ui_text",
        "z": "1112a3ea.54efdc",
        "group": "d40979a3.d11a08",
        "order": 9,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Last created",
        "format": "{{msg.payload.nwlast | date:'dd.MM.yy HH:mm'}}",
        "layout": "row-spread",
        "x": 530,
        "y": 1120,
        "wires": []
    },
    {
        "id": "d0f962f1.6e1fd",
        "type": "ui_button",
        "z": "1112a3ea.54efdc",
        "name": "",
        "group": "d40979a3.d11a08",
        "order": 11,
        "width": "5",
        "height": "1",
        "passthru": false,
        "label": "Show network map",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "{\"tab\":\"Z2M Network map\"}",
        "payloadType": "json",
        "topic": "",
        "x": 130,
        "y": 2920,
        "wires": [
            [
                "d64445e4.511f88"
            ]
        ]
    },
    {
        "id": "d64445e4.511f88",
        "type": "ui_ui_control",
        "z": "1112a3ea.54efdc",
        "name": "",
        "x": 340,
        "y": 2920,
        "wires": [
            []
        ]
    },
    {
        "id": "4b968044.ca533",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M FLOW DEV TRIGGER",
        "links": [
            "f7eaa817.70bfd8",
            "ced9b243.c5dfc",
            "afb0f244.23a25",
            "d8fc6e0f.d831c"
        ],
        "x": 475,
        "y": 1020,
        "wires": []
    },
    {
        "id": "5bdeb97.e5ea048",
        "type": "inject",
        "z": "1112a3ea.54efdc",
        "name": "",
        "repeat": "5",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 330,
        "y": 1020,
        "wires": [
            [
                "4b968044.ca533"
            ]
        ]
    },
    {
        "id": "a4e5b5d9.2c3e88",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{{payload.message}} to device {{payload.meta.entity.friendlyName}}\nOriginal message: {{payload.meta.message}}",
        "output": "str",
        "x": 780,
        "y": 580,
        "wires": [
            [
                "cd065e2e.3e334",
                "aab0241a.1dabd8"
            ]
        ]
    },
    {
        "id": "aab0241a.1dabd8",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "PUBLISH ERROR TO TELEGRAM",
        "links": [
            "34d4fa40.340716",
            "237ac04e.ab42b"
        ],
        "x": 895,
        "y": 560,
        "wires": []
    },
    {
        "id": "d595fafe.6834b8",
        "type": "inject",
        "z": "1112a3ea.54efdc",
        "name": "Request Group List",
        "repeat": "5",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "zigbee2mqtt/bridge/config/groups",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 280,
        "wires": [
            [
                "ab86c3a1.ed149"
            ]
        ]
    },
    {
        "id": "9cce1a99.a33f28",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M LOG GROUPLIST",
        "links": [
            "7ede0202.b35fec",
            "b259a6a5.f45d38",
            "a5f793a4.b6462"
        ],
        "x": 695,
        "y": 540,
        "wires": []
    },
    {
        "id": "1109a698.6fc9c9",
        "type": "comment",
        "z": "1112a3ea.54efdc",
        "name": "Networkmap",
        "info": "",
        "x": 110,
        "y": 2840,
        "wires": []
    },
    {
        "id": "bfd5d37c.7ca3f",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "groupname",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "b259a6a5.f45d38",
        "type": "link in",
        "z": "1112a3ea.54efdc",
        "name": "Z2M GROUP UI",
        "links": [
            "9cce1a99.a33f28"
        ],
        "x": 55,
        "y": 2020,
        "wires": [
            [
                "58f4d54b.e434ac"
            ]
        ]
    },
    {
        "id": "58f4d54b.e434ac",
        "type": "function",
        "z": "1112a3ea.54efdc",
        "name": "Reformat for list",
        "func": "newPayload = [];\nObject.keys(msg.payload.message).forEach(function(key) {\n    var msgKey = msg.payload.message[key].friendly_name + \" (ID: \" + key + \")\";\n    var msgVar = msg.payload.message[key].friendly_name;\n    newentry = '{\"'+msgKey+'\":\" '+ msgVar+'\"}';\n    newPayload.push(msg.payload.message[key].friendly_name);\n});\n\nnewMsg = {'payload': flow.get('groupname'), 'options': newPayload}\nreturn newMsg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 170,
        "y": 2020,
        "wires": [
            [
                "1610ed0c.d0e1e3"
            ]
        ]
    },
    {
        "id": "be14f64d.ceb358",
        "type": "ui_text",
        "z": "1112a3ea.54efdc",
        "group": "d40979a3.d11a08",
        "order": 5,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Zigbee2MQTT version",
        "format": "{{msg.payload.version}}",
        "layout": "row-left",
        "x": 220,
        "y": 1180,
        "wires": []
    },
    {
        "id": "56f299a2.6327d8",
        "type": "ui_text",
        "z": "1112a3ea.54efdc",
        "group": "d40979a3.d11a08",
        "order": 6,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Coordinator firmware",
        "format": "{{msg.payload.coordinator_firmware}}",
        "layout": "row-left",
        "x": 220,
        "y": 1220,
        "wires": []
    },
    {
        "id": "f94fee3a.19978",
        "type": "inject",
        "z": "1112a3ea.54efdc",
        "name": "Reset CC253x",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "zigbee2mqtt/bridge/config/reset",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 320,
        "wires": [
            [
                "ab86c3a1.ed149"
            ]
        ]
    },
    {
        "id": "1610ed0c.d0e1e3",
        "type": "ui_dropdown",
        "z": "1112a3ea.54efdc",
        "name": "Groups",
        "label": "Group",
        "tooltip": "",
        "place": "Select group",
        "group": "38009ddc.858562",
        "order": 8,
        "width": "6",
        "height": "1",
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "",
        "x": 340,
        "y": 2020,
        "wires": [
            [
                "bfd5d37c.7ca3f"
            ]
        ]
    },
    {
        "id": "ce7e9b39.36a138",
        "type": "ui_text_input",
        "z": "1112a3ea.54efdc",
        "name": "Selected device",
        "label": "Selected device",
        "tooltip": "Select device in device list",
        "group": "38009ddc.858562",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "",
        "x": 420,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "d8fc6e0f.d831c",
        "type": "link in",
        "z": "1112a3ea.54efdc",
        "name": "Z2M BIND DEVICE INP",
        "links": [
            "4b968044.ca533"
        ],
        "x": 55,
        "y": 1780,
        "wires": [
            [
                "90333b0d.d35758"
            ]
        ]
    },
    {
        "id": "90333b0d.d35758",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "device",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 1780,
        "wires": [
            [
                "ce7e9b39.36a138"
            ]
        ]
    },
    {
        "id": "3becb9b5.67b2a6",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "d": true,
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "System Notification",
        "name": "",
        "x": 1070,
        "y": 1600,
        "wires": []
    },
    {
        "id": "48a7a523.1678fc",
        "type": "function",
        "z": "1112a3ea.54efdc",
        "name": "Format Data",
        "func": "\nif (msg.payload == \"add\") {\n    var action = \"Adding \";\n    var what = \"group \";\n    var cmd = \"add_group\";\n    var groupname = flow.get('newgroupname');\n}\nif(msg.payload == \"remove\") {\n        action = \"Removing \";\n        what = \"group \";\n        cmd = \"remove_group\";\n        groupname = flow.get('groupname2');\n}\nvar msg1 = { payload: groupname, topic: \"zigbee2mqtt/bridge/config/\" + cmd};\nvar msg2 = { payload: action + what + groupname };\n\nreturn [msg1, msg2];\n",
        "outputs": 2,
        "noerr": 0,
        "x": 770,
        "y": 1520,
        "wires": [
            [
                "699fc636.402658"
            ],
            [
                "3becb9b5.67b2a6"
            ]
        ]
    },
    {
        "id": "699fc636.402658",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M GROUP BIND OUT",
        "links": [
            "398af7a3.80e388"
        ],
        "x": 875,
        "y": 1500,
        "wires": []
    },
    {
        "id": "1eab9c80.093434",
        "type": "switch",
        "z": "1112a3ea.54efdc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "add",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "remove",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "cancel",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 630,
        "y": 1520,
        "wires": [
            [
                "48a7a523.1678fc"
            ],
            [
                "48a7a523.1678fc"
            ],
            []
        ]
    },
    {
        "id": "c4fe2b67.cf9738",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "outputs": 1,
        "ok": "add",
        "cancel": "cancel",
        "topic": "Add group",
        "name": "",
        "x": 470,
        "y": 1500,
        "wires": [
            [
                "1eab9c80.093434"
            ]
        ]
    },
    {
        "id": "aea3baea.3e1e18",
        "type": "ui_toast",
        "z": "1112a3ea.54efdc",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "outputs": 1,
        "ok": "remove",
        "cancel": "cancel",
        "topic": "Remove group",
        "name": "",
        "x": 470,
        "y": 1540,
        "wires": [
            [
                "1eab9c80.093434"
            ]
        ]
    },
    {
        "id": "cc1b1b4c.c16468",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Add group <b>{{flow.newgroupname}}</b>?",
        "output": "str",
        "x": 320,
        "y": 1500,
        "wires": [
            [
                "c4fe2b67.cf9738"
            ]
        ]
    },
    {
        "id": "60051e06.1b187",
        "type": "template",
        "z": "1112a3ea.54efdc",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Remove group <b>{{flow.groupname2}}</b>?",
        "output": "str",
        "x": 320,
        "y": 1540,
        "wires": [
            [
                "aea3baea.3e1e18"
            ]
        ]
    },
    {
        "id": "bc9a1621.4bf0d8",
        "type": "ui_button",
        "z": "1112a3ea.54efdc",
        "name": "",
        "group": "d9a11d4b.0417f",
        "order": 15,
        "width": "6",
        "height": "1",
        "passthru": false,
        "label": "Add group",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Add",
        "payloadType": "str",
        "topic": "",
        "x": 110,
        "y": 1500,
        "wires": [
            [
                "cc1b1b4c.c16468"
            ]
        ]
    },
    {
        "id": "d87bfe09.f0b49",
        "type": "ui_button",
        "z": "1112a3ea.54efdc",
        "name": "",
        "group": "d9a11d4b.0417f",
        "order": 17,
        "width": "6",
        "height": "1",
        "passthru": false,
        "label": "Remove group",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Remove",
        "payloadType": "str",
        "topic": "",
        "x": 120,
        "y": 1540,
        "wires": [
            [
                "60051e06.1b187"
            ]
        ]
    },
    {
        "id": "9f335ddf.67d2b",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "groupname2",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "a5f793a4.b6462",
        "type": "link in",
        "z": "1112a3ea.54efdc",
        "name": "Z2M GROUP UI",
        "links": [
            "9cce1a99.a33f28"
        ],
        "x": 55,
        "y": 1580,
        "wires": [
            [
                "78d47084.a872f"
            ]
        ]
    },
    {
        "id": "78d47084.a872f",
        "type": "function",
        "z": "1112a3ea.54efdc",
        "name": "Reformat for list",
        "func": "newPayload = [];\nObject.keys(msg.payload.message).forEach(function(key) {\n    var msgKey = msg.payload.message[key].friendly_name + \" (ID: \" + key + \")\";\n    var msgVar = msg.payload.message[key].friendly_name;\n    newentry = '{\"'+msgKey+'\":\" '+ msgVar+'\"}';\n    newPayload.push(msg.payload.message[key].friendly_name);\n});\n\nnewMsg = {'payload': flow.get('groupname2'), 'options': newPayload}\nreturn newMsg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 170,
        "y": 1580,
        "wires": [
            [
                "45acd531.d9045c"
            ]
        ]
    },
    {
        "id": "45acd531.d9045c",
        "type": "ui_dropdown",
        "z": "1112a3ea.54efdc",
        "name": "Groups",
        "label": "",
        "tooltip": "Selected group",
        "place": "Select group",
        "group": "d9a11d4b.0417f",
        "order": 16,
        "width": "6",
        "height": "1",
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "",
        "x": 340,
        "y": 1580,
        "wires": [
            [
                "9f335ddf.67d2b"
            ]
        ]
    },
    {
        "id": "dcb4f7a6.e845b8",
        "type": "ui_text_input",
        "z": "1112a3ea.54efdc",
        "name": "",
        "label": "New group name",
        "tooltip": "",
        "group": "d9a11d4b.0417f",
        "order": 14,
        "width": "6",
        "height": "1",
        "passthru": true,
        "mode": "text",
        "delay": "100",
        "topic": "",
        "x": 130,
        "y": 1640,
        "wires": [
            [
                "bcb48a8a.a55288"
            ]
        ]
    },
    {
        "id": "bcb48a8a.a55288",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "newgroupname",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 1640,
        "wires": [
            []
        ]
    },
    {
        "id": "1ba11ffa.fb4e",
        "type": "ui_text",
        "z": "1112a3ea.54efdc",
        "group": "38009ddc.858562",
        "order": 7,
        "width": "6",
        "height": "1",
        "name": "Group membership",
        "label": "<h3>Device group membership</h3>",
        "format": "",
        "layout": "row-left",
        "x": 130,
        "y": 1980,
        "wires": []
    },
    {
        "id": "1303ac28.147ee4",
        "type": "ui_text",
        "z": "1112a3ea.54efdc",
        "group": "38009ddc.858562",
        "order": 11,
        "width": "6",
        "height": "1",
        "name": "Bind device label",
        "label": "<h3>Bind device</h3>",
        "format": "",
        "layout": "row-left",
        "x": 130,
        "y": 2140,
        "wires": []
    },
    {
        "id": "60a53cc.67bb1c4",
        "type": "ui_text",
        "z": "1112a3ea.54efdc",
        "group": "d40979a3.d11a08",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "bridge status label",
        "label": "<h3>Bridge status</h3>",
        "format": "",
        "layout": "row-left",
        "x": 140,
        "y": 1380,
        "wires": []
    },
    {
        "id": "9377320a.f91bf",
        "type": "ui_text",
        "z": "1112a3ea.54efdc",
        "group": "38009ddc.858562",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "rename device label",
        "label": "<h3>Rename device</h3>",
        "format": "",
        "layout": "row-left",
        "x": 660,
        "y": 1780,
        "wires": []
    },
    {
        "id": "7c8cc223.0d85cc",
        "type": "debug",
        "z": "1112a3ea.54efdc",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 730,
        "y": 740,
        "wires": []
    },
    {
        "id": "4a76279b.a9ad98",
        "type": "ui_dropdown",
        "z": "1112a3ea.54efdc",
        "name": "renderer",
        "label": "Renderer",
        "tooltip": "Graphviz renderer",
        "place": "Select renderer",
        "group": "d40979a3.d11a08",
        "order": 10,
        "width": "0",
        "height": "0",
        "passthru": false,
        "options": [
            {
                "label": "Circo",
                "value": "circo",
                "type": "str"
            },
            {
                "label": "Dot",
                "value": "dot",
                "type": "str"
            },
            {
                "label": "Neato",
                "value": "neato",
                "type": "str"
            },
            {
                "label": "Twopi",
                "value": "twopi",
                "type": "str"
            },
            {
                "label": "Fdp",
                "value": "fdp",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "",
        "x": 340,
        "y": 2960,
        "wires": [
            [
                "884ed07d.681f1"
            ]
        ]
    },
    {
        "id": "884ed07d.681f1",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "nwrenderengine",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 2960,
        "wires": [
            []
        ]
    },
    {
        "id": "b6513876.8ae868",
        "type": "inject",
        "z": "1112a3ea.54efdc",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "nwrenderengine",
        "payloadType": "flow",
        "x": 140,
        "y": 2960,
        "wires": [
            [
                "4a76279b.a9ad98"
            ]
        ]
    },
    {
        "id": "829ae398.1035",
        "type": "ui_text",
        "z": "1112a3ea.54efdc",
        "group": "d40979a3.d11a08",
        "order": 8,
        "width": 0,
        "height": 0,
        "name": "nw map label",
        "label": "<h3>Network map</h3>",
        "format": "",
        "layout": "row-left",
        "x": 430,
        "y": 2880,
        "wires": []
    },
    {
        "id": "5564a681.f2b1d8",
        "type": "link out",
        "z": "1112a3ea.54efdc",
        "name": "Z2M GENERIC IN",
        "links": [
            "f0917fb5.7bbd7"
        ],
        "x": 255,
        "y": 100,
        "wires": []
    },
    {
        "id": "f0917fb5.7bbd7",
        "type": "link in",
        "z": "1112a3ea.54efdc",
        "name": "Z2M INPUT",
        "links": [
            "5564a681.f2b1d8"
        ],
        "x": 75,
        "y": 540,
        "wires": [
            [
                "6d78e825.7722f8"
            ]
        ]
    },
    {
        "id": "7eec6698.521ae8",
        "type": "inject",
        "z": "1112a3ea.54efdc",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 470,
        "y": 320,
        "wires": [
            [
                "af2ee649.26fd78"
            ]
        ]
    },
    {
        "id": "af2ee649.26fd78",
        "type": "change",
        "z": "1112a3ea.54efdc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "nwrenderengine",
                "pt": "flow",
                "to": "circo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 690,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "f0e7e75a.3440d8",
        "type": "function",
        "z": "1112a3ea.54efdc",
        "name": "Save last msg",
        "func": "lastDevMsgs = flow.get('lastdevmsgs')||{};\n\nlastDevMsgs[msg.topic] = msg.payload;\nflow.set('lastdevmsgs', lastDevMsgs);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 540,
        "y": 740,
        "wires": [
            [
                "7c8cc223.0d85cc"
            ]
        ]
    },
    {
        "id": "4d2d1114.f6adf",
        "type": "function",
        "z": "1112a3ea.54efdc",
        "name": "Lookup device last msg",
        "func": "lastmsgs = flow.get('lastdevmsgs');\n\nentry=lastmsgs[\"zigbee2mqtt/\"+msg.payload.title];\n\nnewPayload = [];\n\nnewentry = {\n         'title': '<h3>Last message</h3>'\n};\nnewPayload.push(newentry);\n\nfor(var prop in entry) {\n  newentry = {\n         'title': '<b>' + prop + '</b>: ' + entry[prop],\n         'description': entry[prop]\n  };\n  newPayload.push(newentry);\n}\n\nmsg.payload = newPayload;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 610,
        "y": 920,
        "wires": [
            [
                "3d3db415.2dcb2c"
            ]
        ]
    },
    {
        "id": "d3fbf1d9.d4525",
        "type": "json",
        "z": "1112a3ea.54efdc",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 390,
        "y": 740,
        "wires": [
            [
                "f0e7e75a.3440d8"
            ]
        ]
    },
    {
        "id": "3d3db415.2dcb2c",
        "type": "ui_list",
        "z": "1112a3ea.54efdc",
        "group": "ee188496.59ff28",
        "name": "Selected device msg",
        "order": 2,
        "width": "6",
        "height": "6",
        "lineType": "one",
        "actionType": "none",
        "allowHTML": true,
        "outputs": 1,
        "x": 840,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "c1c8dbe2.b16fb8",
        "type": "debug",
        "z": "d1076ec5.efc15",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 640,
        "y": 300,
        "wires": []
    },
    {
        "id": "44cb5c0d.3b6594",
        "type": "ui_context_menu",
        "z": "9a1a2b9e.d6da98",
        "group": "2908388b.8114b8",
        "order": 5,
        "width": 0,
        "height": -1,
        "fontSize": 16,
        "inputPositionXField": "event.pageX",
        "inputPositionXType": "msg",
        "inputPositionYField": "event.pageY",
        "inputPositionYType": "msg",
        "outputField": "payload",
        "inputMenuField": "",
        "inputMenuType": "fixed",
        "menuItems": [
            {
                "id": "ON",
                "icon": "fa-toggle-on",
                "label": "Light on",
                "topic": "menu",
                "payload": "on",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            },
            {
                "id": "OFF",
                "icon": "fa-toggle-off",
                "label": "Light off",
                "topic": "menu",
                "payload": "off",
                "payloadType": "str",
                "visible": true,
                "enabled": true
            }
        ],
        "colors": "native",
        "textColor": "#000000",
        "backgroundColor": "#ffffff",
        "borderColor": "#626262",
        "intervalLength": "0",
        "intervalUnit": "secs",
        "startTimerAtOpen": false,
        "startTimerAtLeave": true,
        "stopTimerAtEnter": true,
        "name": "",
        "x": 720,
        "y": 240,
        "wires": [
            [
                "7f56bdf1.a30ce4"
            ]
        ]
    },
    {
        "id": "40f44662.3ecde8",
        "type": "ui_text",
        "z": "5f633a28.607134",
        "group": "70fb931.dfc146c",
        "order": 6,
        "width": 3,
        "height": 1,
        "name": "SunriseTime",
        "label": "",
        "format": "<i class=\"wi wi-owm-01d\"></i>&nbsp;<i class=\"fa fa-arrow-up\"></i>&nbsp;&nbsp;{{msg.payload.current.sunrise}}",
        "layout": "row-center",
        "x": 990,
        "y": 180,
        "wires": []
    },
    {
        "id": "40f0baad.029164",
        "type": "change",
        "z": "5f633a28.607134",
        "name": "Set global sunset and sunrise",
        "rules": [
            {
                "t": "set",
                "p": "sunrise",
                "pt": "global",
                "to": "payload.current.sunrise",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "sunset",
                "pt": "global",
                "to": "payload.current.sunset",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "1fec9e86.2093e1",
        "type": "change",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "sunset",
                "pt": "msg",
                "to": "sunset",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "sunrise",
                "pt": "msg",
                "to": "sunrise",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "date"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 140,
        "y": 1520,
        "wires": [
            [
                "afeeaaaf.e1c3e8"
            ]
        ]
    },
    {
        "id": "afeeaaaf.e1c3e8",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "sunrise",
                "vt": "global"
            },
            {
                "t": "gt",
                "v": "sunset",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 1520,
        "wires": [
            [
                "b0436554.9ec588"
            ],
            [
                "b0436554.9ec588"
            ]
        ]
    },
    {
        "id": "809a130b.ab583",
        "type": "zigbee2mqtt-in",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "server": "54720da2.31fe84",
        "friendly_name": "Detector Gang",
        "device_id": "0xbc33acfffe4f688e",
        "state": "0",
        "outputAtStartup": true,
        "x": 120,
        "y": 1680,
        "wires": [
            [
                "2a01bc88.007fe4"
            ]
        ]
    },
    {
        "id": "2a01bc88.007fe4",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "property": "homekit.MotionSensor.MotionDetected",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 290,
        "y": 1680,
        "wires": [
            [
                "91818253.3a486"
            ]
        ]
    },
    {
        "id": "92e58671.6a13e8",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "func": "msg.reset = 1;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 480,
        "y": 1780,
        "wires": [
            [
                "99f644c7.ac4ed8"
            ]
        ]
    },
    {
        "id": "91818253.3a486",
        "type": "change",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "sunset",
                "pt": "msg",
                "to": "sunset",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "sunrise",
                "pt": "msg",
                "to": "sunrise",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "date"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 140,
        "y": 1780,
        "wires": [
            [
                "52d880a4.2631a"
            ]
        ]
    },
    {
        "id": "52d880a4.2631a",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "sunrise",
                "vt": "global"
            },
            {
                "t": "gt",
                "v": "sunset",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 1780,
        "wires": [
            [
                "92e58671.6a13e8"
            ],
            [
                "92e58671.6a13e8"
            ]
        ]
    },
    {
        "id": "47955f78.d1b07",
        "type": "zigbee2mqtt-in",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "server": "54720da2.31fe84",
        "friendly_name": "Detector Gang",
        "device_id": "0xbc33acfffe4f688e",
        "state": "0",
        "outputAtStartup": true,
        "x": 140,
        "y": 1160,
        "wires": [
            [
                "3393f7bb.5c2ad8"
            ]
        ]
    },
    {
        "id": "3393f7bb.5c2ad8",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "property": "homekit.MotionSensor.MotionDetected",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 310,
        "y": 1160,
        "wires": [
            [
                "4033a900.161148"
            ]
        ]
    },
    {
        "id": "c0b62f1.0fd50d",
        "type": "function",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "func": "msg.reset = 1;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 500,
        "y": 1260,
        "wires": [
            [
                "4bc1286c.b5da88"
            ]
        ]
    },
    {
        "id": "4033a900.161148",
        "type": "change",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "sunset",
                "pt": "msg",
                "to": "sunset",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "sunrise",
                "pt": "msg",
                "to": "sunrise",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "date"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 1260,
        "wires": [
            [
                "876d4b97.23e1d8"
            ]
        ]
    },
    {
        "id": "876d4b97.23e1d8",
        "type": "switch",
        "z": "9a1a2b9e.d6da98",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "sunrise",
                "vt": "global"
            },
            {
                "t": "gt",
                "v": "sunset",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1260,
        "wires": [
            [
                "c0b62f1.0fd50d"
            ],
            [
                "c0b62f1.0fd50d"
            ]
        ]
    }
]